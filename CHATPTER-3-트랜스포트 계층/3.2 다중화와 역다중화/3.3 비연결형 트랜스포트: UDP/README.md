## 3.3 비연결형 트랜스포트: UDP

### UDP의 특징

UDP는 트랜스포트 계층 프로토콜로서 최소한의 기능만을 제공한다.

1. **다중화/역다중화 기능**
2. **오류 검사 기능(간단한 체크섬 제공)**

 UDP는 이러한 최소 기능만 제공하며,&#x20;

추가적인 데이터 전송 제어는 애플리케이션 레벨에서 구현해야 한다.

---

### UDP의 장점

1. **빠른 데이터 전송**:
   - 연결 설정이 없으므로 데이터 전송 지연이 최소화된다.
2. **낮은 오버헤드**:
   - UDP 헤더는 8바이트로, TCP 헤더(20바이트)에 비해 크기가 작아 네트워크 부담이 적다.
3. **단순한 구현**:
   - 연결 상태를 관리하지 않아 서버에서 더 많은 클라이언트를 처리할 수 있다.
4. **유연성**:
   - 애플리케이션이 필요한 전송 제어 기능을 직접 구현할 수 있다.
5. **즉각적인 전송**:
   - 애플리케이션이 데이터를 UDP에 전달하면, UDP는 즉시 이를 세그먼트로 만들어 네트워크 계층으로 전달한다.

---

### UDP의 단점

1. **혼잡 제어 부재**:\
   혼잡 제어란 네트워크가 폭주 상태에 빠지지 않도록 전송 속도를 조절하는 메커니즘이다.

   만약 UDP 송신자들이 동시에 높은 비트 전송률로 데이터를 전송한다면:

   1\. 라우터의 버퍼 초과 → 패킷 오버플로 발생

   2\. 소수의 UDP 패킷만 전송 경로를 통과

   3\. TCP 송신자는 혼잡을 감지하고 속도를 줄이는 반면, UDP는 계속 전송

   4\. 결과적으로 TCP 세션의 속도가 느려지고 네트워크 혼잡이 가중됨
2. **신뢰성 부족**:
   - 데이터 전송 성공 여부 확인 및 재전송 기능이 없다.
3. **순서 보장 없음**:
   - 데이터그램의 도착 순서를 보장하지 않는다.
4. **오류 복구 기능 없음**:
   - 오류를 검출할 수는 있지만, 이를 복구하기 위한 재전송 등의 처리는 하지 않는다.

 이러한 단점에도 불구하고 UDP는 실시간 애플리케이션에서 낮은 지연과 단순성이 요구될 때 적합하다.

---

### UDP의 활용 사례

1. **DNS**:
   - 대부분의 DNS 요청은 UDP를 사용하며, 응답 실패 시 다른 네임 서버로 질의를 시도한다.
2. **실시간 애플리케이션**:
   - VoIP, 온라인 게임, 실시간 스트리밍 등에서 낮은 지연이 중요한 경우 UDP를 사용한다.
3. **QUIC 프로토콜**:
   - 구글의 QUIC는 UDP 위에서 동작하며, 애플리케이션 계층에서 신뢰성과 데이터 보안을 구현한다.
   - QUIC는 TCP의 주요 기능(혼잡 제어, 신뢰성 보장)을 UDP 기반에서 애플리케이션 레벨에서 구현하여 웹 브라우징과 같은 실시간 데이터 전송에 최적화되어 있다.
   - 특히, 연결 설정 시간이 짧아 더 빠른 데이터 전송을 가능하게 한다.

---

### 3.3.1 UDP 세그먼트 구조

#### 주요 구성 요소

1. **애플리케이션 데이터**:
   - UDP 데이터그램의 데이터 필드에 위치한다.
2. **포트 번호**:
   - 출발지와 목적지 포트 번호를 통해 데이터를 올바른 애플리케이션으로 전달한다.
3. **체크섬**:
   - 데이터 손상 여부를 확인하기 위해 사용한다.
4. **길이 필드**:
   - 헤더를 포함한 UDP 세그먼트의 전체 길이를 바이트 단위로 나타낸다.

 UDP 세그먼트는 간단한 구조로 설계되어 있어 빠른 전송과 적은 오버헤드를 가능하게 한다.

---

### 3.3.2 UDP 체크섬

#### 기능

UDP 체크섬은 데이터의 무결성을 검증하기 위해 송신 측과 수신 측에서 계산 및 확인된다.

#### 동작 과정

1. 송신 측에서 세그먼트의 모든 16비트 워드를 더하고, 1의 보수를 수행한다.
2. 결과값을 체크섬 필드에 삽입한다.
3. 수신 측에서 체크섬을 포함한 모든 16비트 워드를 더하고 결과가 1111111111111111인지 확인한다.
   - 결과가 다를 경우 데이터가 손상된 것으로 판단한다.

 UDP는 오류를 검출하지만 복구하지 않는다. 손상된 세그먼트를 폐기하거나 애플리케이션에 경고와 함께 전달할 수 있다.

---

### UDP를 통한 신뢰적인 데이터 전송

UDP는 비신뢰적인 서비스를 제공하지만, 애플리케이션 레벨에서 필요한 신뢰성을 구현할 수 있다. 이를 통해 UDP 기반에서도 신뢰적인 데이터 전송이 가능하다.

#### 예시

- **QUIC 프로토콜**: 구글의 QUIC는 UDP 위에서 동작하며, 전송 신뢰성과 데이터 보안을 제공한다.
- **사용자 정의 재전송**: 파일 전송 애플리케이션이 UDP를 사용할 경우, 데이터 손실 시 애플리케이션 자체에서 재전송을 구현한다.

---

### 종단과 종단의 원칙 (End-to-End Principle)

#### 개념

- &#x20;여러 계층이 동일한 기능을 중복으로 제공할 필요가 없다는 의미이다.
- 하위 계층에서 기본적인 기능을 제공한다면, 상위 계층에서는 꼭 필요한 경우에만 추가적인 구현을 해야 효율적이라는 원칙이다. 
- 프로토콜 설계 시 불필요한 중복을 방지하고 효율성을 높이는 데 기여한다.

#### 예시

- **UDP 체크섬**: 링크 계층이 오류를 검출하지 못할 수 있으므로, UDP는 자체적으로 오류 검사를 수행한다.
- **파일 전송 애플리케이션**: TCP와 같은 신뢰성 있는 프로토콜을 사용하지 않고, UDP를 통해 전송 실패 시 애플리케이션 레벨에서 재전송을 구현할 수 있다.

 이 원칙은 애플리케이션 요구사항에 맞는 최적의 설계를 가능하게 한다.

