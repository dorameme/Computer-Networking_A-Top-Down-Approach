### ARQ (Automatic Repeat reQuest) 계층  

 ARQ는 OSI 모델에서 2계층(데이터 링크 계층)과 4계층(전송 계층)에서 사용된다.  

---

### 1. ARQ란?  
ARQ(Automatic Repeat reQuest, 자동 반복 요청)는 데이터 전송 중 오류가 발생하면 송신 측에서 다시 데이터를 재전송하는 오류 제어 기법이다.  

---

### 2. OSI 계층에서의 역할  

| 계층 | ARQ 사용 여부 | 설명 |
|------|----------------|--------------------------------|
| 2계층 (데이터 링크 계층) |  사용됨 | - 프레임 단위 오류 검출 및 재전송<br>- 예: Stop-and-Wait ARQ, Go-Back-N ARQ, Selective Repeat ARQ |
| 4계층 (전송 계층) |  사용됨 | - 세그먼트 단위 오류 검출 및 재전송<br>- 예: TCP의 오류 복구 (TCP Retransmission) |

 즉, ARQ는 데이터 링크 계층(프레임 단위)과 전송 계층(세그먼트 단위)에서 사용된다.  

---

### 3. ARQ 방식의 종류  

🔹 (1) Stop-and-Wait ARQ (정지-대기 ARQ, 데이터 링크 계층)  
- 한 번에 하나의 프레임을 전송하고, ACK(수신 확인)를 받을 때까지 대기  
- ACK를 받지 못하면 해당 프레임을 재전송  
- 장점: 구현이 간단함  
- 단점: 전송 대기 시간이 길어 성능이 낮음  

🔹 (2) Go-Back-N ARQ (데이터 링크 계층)  
- 연속적으로 여러 개의 프레임을 전송하고, 오류가 발생하면 해당 프레임 이후 모든 프레임을 다시 전송  
- 장점: Stop-and-Wait보다 효율적  
- 단점: 불필요한 중복 재전송 발생 가능  

🔹 (3) Selective Repeat ARQ (데이터 링크 계층)  
- 오류가 발생한 프레임만 선택적으로 재전송  
- 장점: 재전송 효율이 높음  
- 단점: 버퍼 관리가 복잡함  

🔹 (4) TCP ARQ (전송 계층, TCP Retransmission)  
- TCP는 데이터 손실이 발생하면 해당 세그먼트만 재전송 (Selective Acknowledgment, SACK 사용 가능)  
- 타이머 기반 재전송 및 중복 ACK 기반 재전송을 수행  

---

### 4. ARQ vs FEC (Forward Error Correction)
| 기법 | ARQ | FEC |
|------|----------------|----------------|
| 방식 | 오류 발생 시 재전송 | 오류 발생 전에 미리 오류 정정 코드 전송 |
| 추가 오버헤드 | 재전송으로 인한 오버헤드 발생 | 추가적인 오류 정정 코드 필요 |
| 사용 예시 | TCP, Wi-Fi | 위성통신, 영상 스트리밍 |

---

###  결론  
ARQ는 데이터 링크 계층(2계층)과 전송 계층(4계층)에서 오류 복구를 위한 주요 메커니즘으로 사용된다. 데이터 링크 계층에서는 프레임 단위로 오류 검출 및 재전송, 전송 계층에서는 세그먼트 단위로 오류 복구(TCP 재전송)를 수행한다.
