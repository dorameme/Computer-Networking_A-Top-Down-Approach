### 7.7 무선과 이동성: 상위 계층 프로토콜에의 영향

#### 1. 링크 계층과 네트워크 계층의 차이

| 항목            | 무선 네트워크                                                                 | 유선 네트워크                                                      |
|---------------------|---------------------------------------------------------------------------------|-------------------------------------------------------------------------|
| 링크 계층       | 무선 채널 특성(페이딩, 다중 경로, 숨은 터미널 등)에 의해 성능이 크게 영향을 받는다.    | 안정적인 채널 특성으로 인해 오류나 간섭이 적다.                                  |
| 네트워크 계층    | 이동 사용자가 접속점을 이동하며 경로가 동적으로 변경되는 특성이 있다.                     | 접속점이 고정되어 있으며 경로 변경이 거의 없다.                                  |
| 데이터 손실 원인 | 비트 오류, 핸드오프 지연 등 네트워크 환경에 의해 데이터 손실이 자주 발생한다.            | 주로 네트워크 혼잡(라우터의 버퍼 오버플로)로 인해 데이터 손실이 발생한다.            |
| 혼잡 제어       | 혼잡 원인을 TCP가 정확히 구분하지 못해 성능 저하가 발생할 수 있다.                      | 혼잡 제어가 정확히 작동하며 안정적인 데이터 전송을 보장한다.                      |

이러한 차이는 상위 계층인 트랜스포트 계층과 애플리케이션 계층에도 영향을 미친다.

---

#### 2. 트랜스포트 계층 프로토콜 (TCP)

##### TCP의 기본 동작
- TCP(Transmission Control Protocol)는 데이터 송신자와 수신자 간 신뢰성을 보장하기 위해 설계되었다.
- 주요 동작은 다음과 같다:
  - 송신자는 데이터를 전송한 뒤, 수신자로부터 ACK(승인 메시지)를 받아 데이터가 성공적으로 전달되었는지 확인한다.
  - 데이터가 손실되면 송신자는 혼잡 윈도우(Congestion Window)를 감소시키고 데이터를 재전송한다.

##### 무선 네트워크에서 TCP의 문제
무선 환경에서는 다음과 같은 이유로 TCP의 성능이 저하된다:

1. 네트워크 혼잡:
   - 라우터의 버퍼가 가득 차 데이터가 손실될 수 있다.
   - TCP는 이를 혼잡으로 간주하고 송신 속도를 줄인다.

2. 핸드오프 지연:
   - 사용자가 이동하며 새로운 네트워크 접속점으로 연결되는 과정에서 데이터 손실이 발생한다.

3. 비트 오류:
   - 무선 링크에서 높은 비트 오류율로 인해 패킷 손실이 빈번하게 발생한다.

> 예시: 사용자가 LTE 네트워크에서 동영상을 스트리밍 중일 때, 기지국 간 핸드오프가 발생하면 데이터 패킷이 손실될 수 있다. TCP는 이를 네트워크 혼잡으로 잘못 판단하여 송신 속도를 감소시킨다.

##### TCP의 한계
- TCP는 데이터 손실의 원인을 구분하지 못한다. 따라서 손실이 혼잡 때문인지, 무선 환경의 특성(비트 오류, 핸드오프) 때문인지 알지 못한다.
- 결과적으로, 무선 네트워크에서는 불필요하게 송신 속도를 낮추어 전송 효율이 크게 감소한다.

##### 유선 네트워크와 무선 네트워크에서 TCP의 차이
- 유선 네트워크에서는 대부분의 데이터 손실이 네트워크 혼잡으로 인해 발생한다. 따라서 TCP의 혼잡 제어가 효율적으로 작동한다.
- 무선 네트워크에서는 데이터 손실이 혼잡 외의 다양한 이유(예: 비트 오류, 핸드오프)로 발생한다. 이로 인해 TCP가 혼잡으로 잘못 판단하여 송신 속도를 낮추는 문제가 생긴다.
- 결론: 무선 네트워크에서 TCP는 혼잡 제어가 항상 적절하지 않을 수 있다.

##### 무선 네트워크에서 송신 혼잡이 없는지에 대한 오해
- 무선 네트워크에서 송신 혼잡이 전혀 없다는 것은 오해이다. 무선 링크는 대역폭이 제한적이고, 여러 사용자가 동시에 통신하는 경우 충돌이나 대역폭 경쟁이 발생할 수 있다.
- 데이터 전송량이 과도하게 증가하면 무선 네트워크에서도 혼잡이 발생할 수 있다. 따라서 무선 환경에서도 적절한 트래픽 관리가 필요하다.

---

##### 무선 환경에서 TCP 성능 향상을 위한 접근 방법

1. 지역 복구(Local Recovery)
   - 무선 링크에서 발생한 오류를 해당 구간에서 복구한다.
   - 방법:
     - 802.11 ARQ 프로토콜: 재전송 요청을 통해 손실된 데이터를 무선 링크에서 복구한다.
     - FEC(Forward Error Correction)와 ARQ 결합: 손실 데이터를 예측하고 오류 복구를 병행한다.
   - 문제점: TCP 송신자는 데이터가 무선 링크에서 복구되었음을 알지 못하고, 여전히 혼잡 제어를 수행한다.

2. TCP 송신자의 무선 링크 인지
   - TCP 송신자와 수신자가 무선 링크의 존재를 인지하여 손실 원인을 구분한다.
   - 구체적 방법:
     - 무선 링크의 오류나 핸드오프에 의한 손실에는 혼잡 제어를 수행하지 않는다.
     - 유선 네트워크에서 발생한 혼잡에 대해서만 혼잡 제어를 적용한다.
   - 장점: 불필요한 송신 속도 감소를 방지하여 성능을 개선한다.

3. 연결 분리 방법(Split-Connection Approach)
   - 종단 간 연결을 두 개의 트랜스포트 계층 연결로 분리한다:
     1. 무선 사용자 ↔ AP(Access Point)
     2. AP ↔ 목적지 종단점
   - 무선 구간은 별도의 복구 프로토콜을 사용하여 최적화한다.
   - 적용 사례: 셀룰러 네트워크에서 널리 사용되며, 성능을 크게 향상시킨다.

> 비유: 무선 구간은 바다를 건너는 배와 같고, 유선 구간은 고속도로를 달리는 자동차와 같다. 두 구간을 별도로 관리하면 각각에 적합한 방법으로 최적화할 수 있다.
- 무선 사용자 ↔ AP(Access Point): 이 구간은 무선 네트워크이다. 사용자가 Wi-Fi 또는 셀룰러 네트워크를 통해 AP와 통신한다.

- AP ↔ 목적지 종단점: 이 구간은 유선 네트워크이다.       
AP는 인터넷이나 다른 네트워크에 연결된 유선 환경을 통해 데이터를 전달한다.(안정적인 유선 네트워크(광케이블, 이더넷 등)로 연결된다.)

> 예시: 사용자가 스마트폰으로 Wi-Fi에 연결해 데이터를 송신하면, 스마트폰과 AP 간은 무선 통신이고, AP에서 인터넷 서버(목적지)로 가는 경로는 유선 통신이다.
---

#### 3. 애플리케이션 계층 프로토콜

##### 애플리케이션 계층의 과제
- 무선 링크(특히 셀룰러 네트워크)는 대역폭이 제한적인 환경이다.
  - 대역폭 부족은 애플리케이션의 성능 저하를 초래할 수 있다.

##### 무선 환경의 장점
무선 환경은 이동성을 기반으로 새로운 애플리케이션의 가능성을 제공한다:

1. 위치 인식 서비스:
   - 사용자 위치를 기반으로 실시간 정보를 제공한다.
   - 예: 실시간 내비게이션, 근처 음식점 추천.

2. 문맥 인식 서비스:
   - 사용자의 상태나 주변 환경을 분석해 개인화된 서비스를 제공한다.
   - 예: 사용자의 운동 상태에 따라 음악을 추천한다.

##### 유비쿼터스 컴퓨팅 환경
- 무선 네트워크는 유비쿼터스 컴퓨팅 실현의 핵심 역할을 한다.
  - 언제 어디서나 연결 가능한 환경을 기반으로 새로운 서비스를 제공한다.

---

### 핵심 정리
1. TCP와 무선 네트워크:
   - TCP는 무선 환경에서 혼잡 제어와 데이터 손실 복구 문제를 겪는다.
   - 이를 해결하기 위해 지역 복구, 무선 링크 인지, 연결 분리와 같은 방법이 활용된다.

2. 유선과 무선 네트워크의 차이:
   - 유선 네트워크는 주로 혼잡으로 인해 데이터 손실이 발생하지만, 무선 네트워크는 비트 오류, 핸드오프 등 다양한 원인이 추가된다.
   - 무선 네트워크에서도 대역폭 경쟁이나 충돌로 인해 혼잡이 발생할 수 있으므로 관리가 필요하다.

3. 애플리케이션 계층의 영향:
   - 대역폭 제한 문제를 극복하면서, 무선 환경의 이동성을 활용해 새로운 위치 인식 및 문맥 인식 애플리케이션 개발 가능성이 커진다.

4. 미래 전망:
   - 무선 네트워크는 유비쿼터스 컴퓨팅 환경을 실현하는 데 중요한 역할을 하며, 지속적인 기술 발전이 기대된다.

