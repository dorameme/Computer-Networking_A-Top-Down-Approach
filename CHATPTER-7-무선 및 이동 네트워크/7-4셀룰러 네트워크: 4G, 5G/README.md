![image](https://github.com/user-attachments/assets/c6073e33-740b-4a8e-9eee-53d3b692e0c1)

셀룰러 네트워크란 전파 도달 범위에 따라 네트워크 영역이 여러 지리적 영역(셀)로 나뉘는 구조를 의미한다. 각 셀은 기지국(base station)을 중심으로 신호를 주고받으며 작동한다. 

#### 셀 영역 크기에 영향을 미치는 요소
1. 기지국과 단말기의 송신 강도
2. 셀 내부 방해 요소(건물 등)
3. 기지국 안테나의 설치 높이와 종류

### 7.4.1 4G LTE 셀룰러 네트워크: 구조 및 요소

#### 주요 구성 요소

1. 이동 장치(Mobile Device)
   - 스마트폰, 태블릿, IoT 장치 등이 포함된다.
   - 웹 브라우저, 음성/화상 앱, 모바일 결제 앱 등을 실행한다.

2. UE(User Equipment)
   - 인터넷 프로토콜 스택 5계층을 구현한다.
   - NAT를 통해 IP 주소를 부여받으며, 고유한 64비트 식별자(IMSI)를 가진다.
   - IMSI는 SIM 카드에 저장되며 가입자의 키 정보 및 서비스 접근 정보를 암호화한다.
-     이동 장치(Mobile Device)와 UE(User Equipment)의 차이
      이동장치(Mobile Device)는 사용자 관점에서 스마트폰, 태블릿과 같은 하드웨어적 장치를 의미하며,
      웹 브라우저, 앱 등 사용자 응용 프로그램 실행에 초점이 맞춰져 있다.
      UE(User Equipment)는 네트워크 관점에서 이동 장치의 논리적 역할을 나타내며, 
      네트워크와 통신하기 위한 프로토콜 스택과 식별 정보를 포함한 기술적 구성 요소이다.

3. 기지국(Base Station)
   - 이동 장치와의 무선 연결을 담당하며 무선 자원과 셀 영역을 관리한다.
   - 인접 기지국과 협력하여 간섭을 최소화한다.

4. 홈 가입자 서버(Home Subscriber Server, HSS)
   - 가입자 정보와 인증 데이터를 저장하는 데이터베이스이다.

5. S-GW(Serving Gateway) & P-GW(Packet data Network Gateway)
   - S-GW: 이동 장치와 인터넷 간 데이터 경로를 설정한다.
   - P-GW: 이동 장치에 NAT IP 주소를 제공하며, 외부 네트워크와의 연결을 관리한다.

6. 이동성 관리 개체(Mobility Management Entity, MME)
![image](https://github.com/user-attachments/assets/6db46eba-f0f9-4865-8347-c5b512adee00)

   - 이동 장치의 인증 및 셀 위치 정보를 관리한다.
   - 제어 평면 요소로, 데이터 전송 경로 설정 및 셀 이동성을 조정한다.

#### 4G 네트워크에서의 주요 기능

1. 인증(Authentication)
   - 네트워크와 장치 간 상호 인증을 수행한다.
   - MME가 HSS와 상호작용하여 장치를 인증한다.

2. 경로 설정(Path Setup)
   - 이동 장치 → 기지국 → S-GW → P-GW로 이어지는 데이터 경로를 설정한다.
   - 터널은 장치 이동 시에도 안정성을 유지한다.

3. 셀 위치 추적(Cell Location Tracking)
   - 장치가 이동할 때 기지국이 위치 정보를 MME에 업데이트한다.
   - 수면 모드에서는 MME가 페이징을 통해 장치를 찾는다.

### 2G에서 3G, 4G로의 변화

#### 2G 네트워크 구조
- 회선 교환 방식의 음성 서비스를 지원한다.

#### 3G 네트워크 구조
- 회선 교환 음성 서비스와 패킷 교환 데이터 서비스를 분리하여 제공한다.

#### 4G 네트워크 구조
- All-IP 코어 기반으로 음성 및 데이터 서비스를 통합하여 제공한다.

---

### LTE 요소 및 WLAN 기능 비교 표

| LTE 요소             | 설명                                                                 | 비교되는 WLAN 기능                              |
|--------------------------|------------------------------------------------------------------------|-------------------------------------------------|
| 이동 장치(UE)         | 사용자의 IP 지원 무선 이동 장치 (예: 스마트폰, 태블릿, 랩톱)                      | 호스트, 종단 시스템                                  |
| 기지국(eNode-B)       | LTE 네트워크의 무선 접속 링크의 네트워크 측면                                   | AP(LTE 기지국은 WLAN에 없는 다른 기능도 다수 수행)          |
| 이동성 관리 개체(MME) | 이동 장치 서비스 관리 데이터: 인증 및 이동성 관리                               | AP(MME는 WLAN에 없는 다른 기능도 다수 수행)          |
| 홈 가입자 서버(HSS)   | 이동 장치의 홈 네트워크에 위치하여 인증, 홈 네트워크 및 방문 네트워크의 접속 권한 제공         | 비교되는 장치 없음                                   |
| 서빙 게이트웨이(S-GW), PDN 게이트웨이(P-GW) | 셀룰러 사업자 네트워크의 라우터. 외부 인터넷으로의 데이터 전달을 조정함                     | ISP 네트워크에서의 iBGP, eBGP 라우터                |
| 무선 접속 네트워크(Radio Access Network) | 이동 장치와 기지국 사이의 무선 링크                                           | AP와 무선 장치 사이의 802.11 무선 링크                 |

---
### 비유를 통한 이해

1. 기지국(eNode-B): "LTE 기지국은 경로를 제공 & 경로를 연결해준다."
2. 이동성 관리 개체(MME): "MME는 교통 상황을 모니터링하고 차량이 원활히 이동할 수 있도록 조정하는 교통 관제 센터와 유사하다."
3. 홈 가입자 서버(HSS): "HSS는 은행의 고객 정보 데이터베이스와 같아, 사용자의 신원을 확인하고 서비스 권한을 관리한다."
4. 서빙 게이트웨이(S-GW) 및 PDN 게이트웨이(P-GW): "S-GW와 P-GW는 물류 허브처럼 데이터를 각 지역으로 효율적으로 전달하며, 목적지까지의 경로를 관리한다."
5. 무선 접속 네트워크: "무선 접속 네트워크는 기지국과 장치를 연결하는 다리와 같아, 양쪽의 흐름을 원활히 이어준다."

---
### 7.4.2 LTE 프로토콜 스택
![image](https://github.com/user-attachments/assets/fa8a5443-8bbc-4a9e-aca6-27b25c564d6c)
4G LTE는 All-IP 네트워크 구조이다. 따라서 LTE 프로토콜 스택의 상위 계층은 IP, TCP, UDP, 그리고 다양한 애플리케이션 계층 프로토콜들로 구성된다.

#### LTE 사용자 평면 프로토콜 스택

LTE 이동 노드, 기지국, 서빙 게이트웨이에서의 사용자 평면 프로토콜 스택은 아래와 같다. 사용자 평면 프로토콜 활동의 대부분은 이동 장치와 기지국 사이의 무선 링크에서 발생한다.

---

### LTE 링크 계층의 세부 부계층

| 계층 이름           | 주요 기능                                                                | 비유                                                           |
| ------------------- | ------------------------------------------------------------------------ | ---------------------------------------------------------------- |
| 패킷 데이터 융합(PDCP) | - IP 헤더 압축: 전송되는 비트 수 감소 - 암호화/복호화: 네트워크 초기 연결 시 키 기반 데이터 보호             | "PDCP는 무거운 짐(데이터)을 작게 나누어 포장(압축)하고, 보안 자물쇠(암호화)로 잠그는 역할을 한다."    |
| 무선 링크 제어(RLC)   | - 단편화 및 재조립: 큰 IP 데이터그램을 작은 조각으로 분할 및 재조립 - 신뢰성 제공: ACK/NAK 기반 전송 안정성 보장 | "RLC는 큰 퍼즐 조각(데이터)을 잘라서 보내고, 받은 후 다시 맞추는 작업을 한다."                |
| 매체 접속 제어(MAC)   | - 전송 스케줄링: 무선 슬롯 요청 및 제어 - 오류 감지/정정: 중복 비트를 이용한 순방향 오류 정정(FEC) 수행        | "MAC은 주차장의 관리인처럼 차량(데이터)이 올바르게 주차(전송)되도록 순서를 정하고, 손상된 차량을 복구한다." |

---

### 터널링과 데이터 경로

LTE 네트워크에서는 사용자 데이터 경로에서 터널링이 사용된다. 터널은 MME의 제어하에 이동 장치가 처음으로 네트워크에 연결될 때 설정된다. 두 종단점 사이의 각 터널에는 고유한 터널 종단점 식별자(TEID)가 있다.

| 프로세스 단계 | 설명                                                          | 비유                                                                |
| ----------- | --------------------------------------------------------------- | --------------------------------------------------------------------- |
| 송신 측    | - 데이터그램을 수신하여 GTP로 캡슐화 / TEID를 포함한 UDP 세그먼트로 서빙 게이트웨이(S-GW)로 전송 | "터널링은 배송 트럭(데이터)이 고속도로(네트워크)에서 정해진 경로를 따라 목적지까지 안전하게 도착하도록 돕는 시스템이다." |
| 수신 측    | - UDP 데이터그램을 캡슐 해제 / IP 데이터그램을 추출하여 이동 장치로 전달                   | "TEID는 배송 물품의 송장 번호와 같아, 데이터의 목적지를 정확히 식별한다."                         |

---

### All-IP 네트워크 구조의 의미

4G LTE의 All-IP 네트워크 구조란, LTE 네트워크가 모든 데이터 전송을 IP(Internet Protocol)를 기반으로 처리한다는 것을 의미한다. \
이는 기존의 2G와 3G 네트워크 구조에서 사용되던 음성 전용 회선 교환 기술을 배제하고, 음성, 영상, 데이터 등 모든 서비스가 IP 기반 패킷 전송으로 통합되었음을 나타낸다.

#### 장점

| 항목        | 설명                                                              |
| ------------- | ------------------------------------------------------------------- |
| 효율성 증가    | - 단일 데이터 전송 방식(IP) 사용으로 운영 및 관리 간소화 - VoIP(Voice over IP)로 음성 통화 처리 |
| 확장성       | - 다양한 IP 기반 애플리케이션과 서비스 지원 - IoT, 영상 스트리밍, 클라우드 서비스에 적합             |
| 속도와 품질 개선 | - 높은 데이터 전송 속도 제공 - 패킷 손실 및 지연 감소로 안정적인 서비스 품질 보장                   |

---
### 7.4.3 LTE 무선 접속 네트워크
![image](https://github.com/user-attachments/assets/3a6af209-2d38-45e5-8392-8ccd00dc5ff9)


LTE는 다운스트림 채널에서 주파수 분할 다중화와 시분할 다중화를 조합한 기술을 사용한다. 이 기술은 직교 주파수 분할 다중화(Orthogonal Frequency Division Multiplexing, OFDM)으로 알려져 있다.

#### 주요 특징
1. 주파수 및 시간 슬롯의 할당
   - LTE에서 활성화된 각 이동 장치에는 하나 이상의 주파수 채널과 0.5ms 단위의 시간 슬롯이 할당된다.
   - 예: 4개의 주파수에서 총 8개의 시간 슬롯을 할당.

2. 구조적 시간 슬롯
   - 각 주파수는 10ms 프레임 안에 20개의 0.5ms 시간 슬롯으로 구성된다.
   - 음영 처리된 슬롯은 할당된 슬롯을 나타냄.

#### 동작 원리
1. 동일한 주파수 또는 다른 주파수에서 추가 시간 슬롯 할당으로 전송 속도를 증가시킬 수 있다.
2. 이동 장치 간의 슬롯 할당은 밀리초 단위로 갱신될 수 있다.
3. 다양한 변조 방식을 사용하여 전송률을 조정할 수도 있다.

#### 스케줄링 알고리즘
- 이동 장치에 특정 타임 슬롯을 할당하는 기준은 LTE 표준에 의해 강제되지 않는다.
- 특정 이동 장치가 주어진 시간과 주파수 슬롯에 전송할 수 있도록 허용하는 결정은 LTE 장비 공급자 또는 네트워크 운영자가 제공하는 스케줄링 알고리즘에 의해 이루어진다.

---

### 비유를 통한 이해

1. 시간과 주파수 슬롯: "시간 슬롯과 주파수는 영화관 좌석과 같다. 각 관람객(이동 장치)에게 특정 시간대와 좌석이 배정된다. 관객 수가 많아지면 추가 좌석을 배정하거나, 특정 좌석을 재배치할 수 있다."
2. 스케줄링 알고리즘: "영화관 좌석 배치는 극장 직원(LTE 네트워크 운영자)의 배치 규칙에 따라 실시간으로 조정된다. 인기 있는 좌석은 빠르게 할당되고, 여유 좌석은 빈자리에 맞춰 조정된다."
3. 변조 방식: "변조 방식은 관람객의 언어 선택처럼 이해할 수 있다. 각 관객(데이터 전송)이 더 나은 경험을 위해 적합한 언어(변조 방식)를 선택한다."

----
## 7.4.4 추가적인 LTE 기능: 네트워크 접속과 전원 관리

### 네트워크 접속

이동 장치가 셀룰러 사업자의 네트워크에 접속하는 절차는 세 단계로 나뉜다: 기지국 접속, 상호 인증, 게이트웨이 간 경로 구성.

#### 1. 기지국 접속

- 기지국 신호 검색: 이동 장치는 모든 주파수 대역과 채널에서 기지국이 5ms마다 브로드캐스트하는 기본 동기화 신호를 검색한다.
- 보조 신호 확인: 기본 동기화 신호를 발견하면 해당 주파수를 유지하며, 보조 동기화 신호를 통해 추가 정보를 얻는다.
- 기지국 선택 및 연결: 수집된 정보를 바탕으로 적합한 기지국을 선택하고, 무선 홉을 통해 제어 신호 연결을 설정한다.

#### 2. 상호 인증

- MME와의 인증 과정: 기지국은 MME(Mobility Management Entity)와 연결하여 상호 인증을 수행한다.
  - 네트워크는 이동 장치가 해당 IMSI(가입자 식별 정보)와 연관된 합법적 장치임을 확인한다.
  - 이동 장치는 접속하려는 네트워크가 진짜 셀룰러 사업자 네트워크인지 검증한다.
- 상호 인증 완료: MME와 이동 장치는 서로를 인증하며, MME는 이동 장치가 연결된 기지국의 ID를 확인한다.
  - 비유: 은행에서 고객이 본인 신분증을 제시하고 은행이 고객 신원을 확인하는 과정과 유사하다.

#### 3. 게이트웨이 간 경로 구성

- 터널 구성: MME는 PDN 게이트웨이(P-GW), 서빙 게이트웨이(S-GW), 기지국과 연결하여 두 개의 터널을 설정한다.
  - 첫 번째 터널: 기지국과 서빙 게이트웨이(S-GW) 간 연결.
  - 두 번째 터널: 서빙 게이트웨이(S-GW)와 PDN 게이트웨이(P-GW) 간 연결.
- 인터넷 연결 활성화: 이 단계가 완료되면 이동 장치는 터널을 통해 인터넷과 IP 데이터그램을 송수신할 수 있다.
  - 비유: 집에서 인터넷을 사용할 때, 와이파이 공유기(S-GW)와 ISP(P-GW)를 거쳐 외부 네트워크로 연결되는 과정과 유사하다.

### PDN(Public Data Network)와 관련 구성 요소

#### PDN(Public Data Network)이란?

- 정의: PDN은 공공 데이터 네트워크로, 이동 장치가 인터넷이나 기업망과 같은 외부 네트워크에 접속할 수 있도록 하는 네트워크이다.
- 역할: PDN 게이트웨이(P-GW)는 이동 장치의 데이터 트래픽을 관리하며, 외부 네트워크와의 통신을 담당한다. 또한 NAT(Network Address Translation)를 수행하여 이동 장치에 공인 IP 주소를 할당한다.
  - 비유: PDN은 집에서 외부 인터넷 서비스에 연결하는 ISP(인터넷 서비스 제공자)와 같은 역할을 한다.

#### MME와 터널의 역할

- MME는 이동 장치와 S-GW, P-GW 간의 터널을 설정하고 관리한다.
  - 터널은 데이터가 이동 장치에서 외부 네트워크로 안전하고 효율적으로 전달되도록 하는 통로 역할을 한다.
  - MME는 이러한 터널 설정을 조정하여 데이터가 적절한 경로로 흐르도록 돕는다.
- 비유: 터널은 고속도로의 톨게이트처럼 데이터를 빠르고 안전하게 특정 목적지까지 운반하는 구조를 제공하며, MME는 이러한 톨게이트의 관리자 역할을 한다.

#### PDN 게이트웨이와 서빙 게이트웨이 차이

| 구분    | PDN 게이트웨이(P-GW)          | 서빙 게이트웨이(S-GW)              |
| --------- | ---------------------------- | ------------------------------- |
| 역할    | 이동 장치의 데이터 트래픽을 외부 네트워크와 연결  | 기지국과 PDN 게이트웨이 간 데이터를 중계        |
| 위치    | LTE 네트워크의 코어 네트워크 영역         | 기지국과 코어 네트워크 사이의 중간 위치          |
| 주요 기능 | NAT 수행 및 공인 IP 주소 할당         | 이동 장치의 데이터 트래픽을 모아서 P-GW로 전달    |
| 비유    | ISP(인터넷 서비스 제공자)             | 지역의 네트워크 허브                     |
| 특이사항  | 외부 네트워크와 직접적으로 연결되는 최종 게이트웨이 | 로컬 트래픽 관리를 주로 담당하며, 다수의 기지국과 연결 |

---

### 전력 관리: 수면 모드

무선 장치는 전력 소모를 최소화하기 위해 송수신하지 않을 때 수면 상태로 전환할 수 있다. 4G LTE에서는 이동 장치가 두 가지 수면 상태 중 하나에 있을 수 있다.

#### 1. 불연속 수신 상태 (Discontinuous Reception State)

- 약한 수면: 수백 밀리초 동안 비활성 상태로 있다가 주기적으로 깨어나는 단계이다.
  - 이동 장치와 기지국은 깨어날 주기적인 시간을 미리 예약한다.
  - 예약된 시간에만 기지국의 다운스트림 전송을 모니터링하며, 나머지 시간에는 수면 상태를 유지한다.
  - 비유: 정기적으로 알람을 맞춰서 깨어나는 낮잠과 비슷하다.

#### 2. 유휴 상태 (Idle State)

- 깊은 수면: 이동 장치가 깊이 잠들어 통신 사업자 네트워크 내 새로운 셀로 이동해도 이전 기지국에 알릴 필요가 없다.
  - 깨어날 때, MME가 브로드캐스트한 페이징 메시지를 확인하고 새로운 기지국과 연결을 재설정한다.
  - 페이징 메시지는 기지국이 셀 내 모든 장치로 브로드캐스트하며, 이를 통해 깨어날 장치를 특정한다.
  - 비유: 깊은 잠에서 친구의 전화로 깨어나며, 그 친구의 집 주소(기지국)를 새롭게 확인하는 과정과 유사하다.


---
## 7.4.5 글로벌 셀룰러 네트워크: 네트워크들의 네트워크

### 글로벌 셀룰러 네트워크 구성

글로벌 셀룰러 네트워크는 여러 통신 사업자들의 네트워크가 상호 연결된 ‘네트워크들의 네트워크’이다.

사용자의 스마트폰은 4G 기지국을 통해 홈 네트워크(home network)에 연결되며, 이를 기반으로 다른 네트워크와 글로벌 인터넷으로 연결된다.

#### 주요 구성 요소

- 홈 네트워크: 사용자가 소속된 셀룰러 통신 사업자의 네트워크로, 글로벌 연결의 출발점이 된다.
- IPX(Internet Protocol Packet eXchange): ISP 간 데이터를 교환하는 인터넷 교환 지점과 유사한 네트워크로, 셀룰러 통신 사업자 간의 연결을 지원하는 관리 네트워크이다.
  - 역할: 사업자 간 데이터 트래픽을 중계하고, 안전한 피어링(peer-to-peer 연결)을 보장한다.

---

## 7.4.6 5G 셀룰러 네트워크

### 5G의 주요 특징

5G는 궁극적인 광역 데이터 서비스를 제공하며, 다음과 같은 특징을 가진다:

- 기가비트 연결 속도: 4G 대비 약 10배의 최대 비트 전송률.
- 초저지연: 4G 대비 10배 빠른 지연 시간.
- 확장된 트래픽 용량: 4G 대비 100배 이상의 트래픽 용량.

### 5G 주파수 대역

- FR1: 450 MHz\~6 GHz.
- FR2: 24 GHz\~52 GHz(밀리미터파 주파수).
  - 장점: 매우 빠른 데이터 전송 속도.
  - 단점:
    - 도달 범위가 짧아 농촌 지역에 부적합.
    - 도시 지역에서는 기지국의 밀집 배치가 필요.
    - 대기 간섭에 취약.

### 물리 계층 및 인프라 요구사항

- 4G LTE와 역방향 호환되지 않음.
- 기존 스마트폰 지원이 불가능하며, 물리적 인프라 업그레이드 필요.
- 이동 통신 사업자는 기지국 및 네트워크 장비에 대규모 투자가 요구됨.

---

### 5G 표준과 응용 사례

#### 주요 표준

1. eMBB(Enhanced Mobile Broadband)

   - 증가된 대역폭과 적은 지연 시간.
   - 고속 다운로드 및 업로드를 위한 표준.

2. URLLC(Ultra Reliable Low-Latency Communications)

   - 지연 시간에 민감한 애플리케이션 지원.
   - 예: 공장 자동화, 자율 주행.
   - 목표 지연 시간: 1 ms.

3. mMTC(Massive Machine Type Communications)

   - IoT 장치 연결을 위한 협대역 접속.
   - 전력 요구를 낮춰 IoT 네트워크 연결성 개선.

#### 밀리미터파 주파수와 데이터 용량

- 밀리미터파 주파수(24 GHz\~52 GHz)는 데이터 용량을 100배 증가시킬 가능성이 있다.

- 데이터 용량 계산 공식:

  데이터 용량 = 셀 밀도 × 가용 스펙트럼 × 스펙트럼 효율

  - 셀 밀도(cell density): 셀/km².
  - 가용 스펙트럼(available spectrum): Hz 단위.
  - 스펙트럼 효율(spectral efficiency): bps/Hz/셀 단위.

- MIMO 기술: 다중 안테나를 사용하여 빔 형성으로 신호를 특정 사용자에게 전송.

  - 동일 주파수 대역에서 10\~20명 사용자 동시 전송 가능.
  - 스몰 셀 스테이션(small cell station)을 통해 신호 범위 문제 해결.

---

### 5G 코어 네트워크

#### 주요 특징

5G 코어 네트워크는 인터넷 및 클라우드 서비스와의 통합을 최적화하고, 네트워크 전체에 분산 서버와 캐시를 포함하여 지연 시간을 줄인다. 또한 다양한 성능 요구를 충족하기 위한 유연성을 제공한다.

#### 5G 코어 아키텍처

- 제어 평면(Control Plane)과 사용자 평면(User Plane)의 완전한 분리.
- 가상화된 소프트웨어 기반 네트워크 기능.

#### 핵심 기능

1. 사용자 평면 기능(User-Plane Function, UPF)

   - 패킷 처리를 네트워크 가장자리로 분산하여 효율성 증가.

2. 접속 및 이동성 관리 기능(Access and Mobility Management Function, AMF)

   - 연결 및 이동성 관리 작업 담당.
   - 4G MME에서 분리된 기능.

3. 세션 관리 기능(Session Management Function, SMF)

   - 세션 관리와 IP 주소 관리를 담당.
   - DHCP 역할 수행.

#### 한계와 도전 과제

- 2020년 기준으로 5G는 초기 단계이며, 여러 표준이 아직 확정되지 않았다.
- 새로운 광역 무선 서비스로서의 잠재력은 시간이 지나야 평가될 수 있다.

