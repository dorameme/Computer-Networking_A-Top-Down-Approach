## 보안 기능이 하나 이상의 계층에서 제공되는 이유

보안은 네트워크 계층에서만 제공하는 것으로 충분하지 않은 이유:

1. 네트워크 계층에서 데이터그램의 모든 데이터를 암호화하고 IP 주소를 인증하더라도 사용자 레벨의 보안은 제공할 수 없다.
   - 예: 인터넷 상거래 사이트는 고객 인증을 위해 IP 계층 보안에만 의존할 수 없다.
2. 애플리케이션 계층에서는 새로운 인터넷 서비스에 보안 서비스를 쉽게 구현할 수 있다.

---

## 현대 보안 전자메일의 방식

현대의 보안 전자메일은 2단계 암호화 구조를 사용하여 기밀성과 보안성을 동시에 제공:

1. 세션키(AES)로 이메일 내용을 암호화
   - AES와 같은 대칭키 알고리즘을 이용해 이메일 본문 데이터를 암호화.
   - AES는 빠르고 대용량 데이터를 처리하는 데 적합하여 데이터 암호화에 자주 사용.

2. RSA로 세션키를 암호화
   - 세션키를 수신자의 공개키로 암호화하여 송신합니다.
   - 수신자는 자신의 개인키를 사용해 세션키를 복호화한 뒤, AES를 사용해 이메일 본문을 복호화.

### 동작 흐름:
1. 송신자가 AES를 사용해 이메일 내용을 암호화.
2. AES의 세션키를 RSA의 공개키로 암호화하여 수신자에게 전송.
3. 수신자는 RSA의 개인키로 세션키를 복호화.
4. 수신자는 복호화된 세션키(AES)를 이용해 이메일 내용을 복호화.

### 장점:
- AES의 속도: 대칭키 알고리즘은 빠르고 효율적이어서 대량 데이터를 처리하기 적합.
- RSA의 보안성: 비대칭키 알고리즘을 사용해 세션키를 안전하게 공유할 수 있다.

이 방식은 AES와 RSA의 장점을 결합하여 현대 보안 전자메일의 표준 방식으로 자리 잡고 있디.

---

## 1. 보안 전자메일

보안 전자메일은 인터넷 환경에서 이메일의 기밀성, 무결성, 송신자 인증을 보장하기 위해 암호화 기법을 활용한 시스템이다.       
이를 통해 이메일 내용을 제3자가 볼 수 없도록 보호하며, 메시지가 변조되지 않았음을 확인하고, 송신자의 신원을 인증한다.

### 보안 전자메일의 핵심 원리

1. 세션키를 이용한 메시지 암호화

   - 세션키(대칭키)로 이메일 내용을 암호화하여 기밀성을 확보한다.
   - 세션키는 공개키 암호화(RSA)로 암호화되어 안전하게 전달된다.

2. 전자서명과 해시를 통한 인증 및 무결성 보장

   - 송신자는 메시지의 해시값을 생성하고, 이를 자신의 개인키로 암호화하여 전자서명을 생성한다.
   - 수신자는 송신자의 공개키를 사용해 전자서명을 검증하고, 해시값 비교를 통해 무결성을 확인한다.

3. 통합 보안 과정

   - 메시지 암호화(기밀성)와 전자서명(무결성 및 인증)을 결합하여 이메일 보안을 완성한다.

---

## 2. 보안 전자메일 구현법

### 2.1. 기밀성 확보

1. 세션키 생성 및 암호화

   - 송신자는 임의로 생성한 세션키(대칭키)를 사용하여 메시지를 암호화한다.
   - 세션키는 수신자의 공개키로 암호화되어 안전하게 전달된다.

2. 메시지 암호화 과정

   - 송신자는 메시지 `m`을 세션키 `Ks`로 암호화하여 암호문을 생성한다.
   - 생성된 세션키 `Ks`는 수신자의 공개키로 암호화된다.

3. 수신자의 복호화 과정

   - 수신자는 자신의 개인키로 암호화된 세션키를 복호화해 `Ks`를 얻는다.
   - `Ks`를 사용해 메시지 암호문을 복호화하여 원본 메시지를 확인한다.

### 2.2. 송신자 인증과 메시지 무결성

1. 전자서명 생성

   - 송신자는 메시지 `m`의 해시값 `H(m)`을 계산한다.
   - `H(m)`을 자신의 개인키로 암호화하여 전자서명을 생성한다.

2. 전자서명 검증

   - 수신자는 송신자의 공개키로 전자서명을 복호화해 `H(m)`을 얻는다.
   - 메시지 `m`에 동일한 해시 알고리즘을 적용해 계산한 해시값과 비교한다.
   - 두 해시값이 같으면, 송신자의 신원과 메시지 무결성이 확인된다.

3. 전체 흐름

   - 전자서명과 메시지를 하나의 꾸러미로 만들어 암호화해 전송한다.
   - 수신자는 공개키와 개인키를 사용해 이를 복호화하고, 검증 과정을 수행한다.

---

## 3. PGP(Pretty Good Privacy)

PGP는 보안 전자메일의 대표적인 구현 사례로, 기밀성, 무결성, 송신자 인증을 보장한다.

### PGP의 주요 특징

1. 키 쌍 생성 및 관리

   - PGP는 공개키와 개인키를 생성하며, 공개키는 공개키 서버에 게시하거나 이메일에 첨부된다.

2. 신뢰의 그물(Web of Trust)

   - PGP는 중앙화된 인증 기관 없이, 사용자들 간의 신뢰 네트워크를 통해 공개키를 검증한다.
   - 사용자는 공개적으로 키를 교환하고, 서로의 키를 개인키로 서명하여 인증한다.

3. 다양한 암호화 선택지 제공

   - PGP는 메시지 암호화, 전자서명, 또는 둘 다 수행할 수 있는 옵션을 제공한다.

### PGP의 동작 흐름

1. 메시지는 대칭키(세션키)를 사용해 암호화된다.
2. 세션키는 수신자의 공개키(비대칭키)로 암호화되어 전송된다.
3. 수신자는 자신의 개인키로 세션키를 복호화한 뒤, 메시지를 복호화한다.

---

## 4. RSA, DES, AES 비교

| 항목       | RSA (Rivest-Shamir-Adleman)                               | DES (Data Encryption Standard) | AES (Advanced Encryption Standard) |
| ------------ | ------------------------------------------------------------- | ---------------------------------- | -------------------------------------- |
| 암호화 방식   | 비대칭 암호화(공개키)                                                  | 대칭 암호화                             | 대칭 암호화                                 |
| 키 구조     | 공개 키(공개/비밀 키 한 쌍 사용)                                          | 하나의 비밀 키 사용                        | 하나의 비밀 키 사용                            |
| 키 길이     | 일반적으로 1024, 2048, 4096비트                                      | 56비트                               | 128, 192, 256비트                        |
| 알고리즘 구조  | 수학적 기반(소인수분해 어려움)                                             | Feistel 구조                         | Substitution-Permutation Network(SPN)  |
| 보안 수준    | 매우 높은 보안 (키 길이에 따라 다름)                                        | 낮음 (짧은 키 길이와 느린 속도)                | 매우 높은 보안 (현재 표준)                       |
| 속도       | 느림                                                            | 빠름                                 | 빠름                                     |
| 주요 사용 사례 | 디지털 서명, 키 교환, 인증                                              | 구식 데이터 암호화                         | 현대 데이터 암호화 (SSL, TLS, 파일 암호화 등)        |
| 공통점      | - 모두 데이터 암호화를 위해 설계됨- 기밀성 제공- 표준화된 암호화 방식- 암호 해독에 시간과 자원이 소요됨 |                                    |                                        |

---

### 각각의 예시에 쓰이는 기술
### 짧은 예시
1. 전자서명만 추가:  
   - 상황: 송신자가 계약서 내용을 보냄. "이 문서는 내가 보낸 것이고, 내용이 변경되지 않았음을 증명합니다."  
   - 사용 기술: 해시 알고리즘 + 개인키/공개키  
   - 동작: 송신자가 계약서의 해시값을 계산한 후 개인키로 서명 → 수신자가 공개키로 서명을 확인해 무결성과 송신자 인증을 검증.

---

2. 메시지 암호화만:  
   - 상황: 민감한 정보(비밀번호)를 기밀하게 송신. "제3자가 읽을 수 없게 메시지를 보호합니다."  
   - 사용 기술: 대칭키(AES) + 비대칭키(RSA)  
   - 동작: 송신자가 메시지를 AES로 암호화 → AES 세션키를 RSA 공개키로 암호화 → 수신자가 RSA 개인키로 세션키 복호화 → 세션키로 메시지 복호화.

---

3. 전자서명 + 암호화:  
   - 상황: 기밀한 정부 문서를 안전하게 전달. "문서의 기밀성, 무결성, 송신자 인증 모두 보장합니다."  
   - 사용 기술: 해시 + 개인키/공개키 + 대칭키  
   - 동작: 송신자가 문서의 해시값을 계산하고 개인키로 서명 → 문서를 AES로 암호화 → 세션키를 RSA 공개키로 암호화 → 수신자가 RSA 개인키로 세션키 복호화 → AES로 메시지 복호화 → 공개키로 서명 확인 및 해시값 검증.


### 정리
- 전자서명만 추가: 무결성과 송신자 인증 → 해시 알고리즘 + 개인키/공개키 사용
- 메시지 암호화만: 기밀성 보장 → 대칭키(AES) + 비대칭키(RSA) 사용
- 전자서명 + 암호화: 무결성 + 인증 + 기밀성 → 해시 + 개인키/공개키 + 대칭키 사용

