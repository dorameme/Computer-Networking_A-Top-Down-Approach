# 8.9 운영 보안: 방화벽과 침입 탐지 시스템
![image](https://github.com/user-attachments/assets/522a5484-75b1-4f6f-9440-bd2572673322)
### 8.9.1 방화벽

#### 방화벽 개념

| 항목     | 설명                                                          |
| ------ | ----------------------------------------------------------- |
| 방화벽 정의 | 전체 인터넷으로부터 기관의 내부 네트워크를 분리시키는 하드웨어와 소프트웨어의 조합.              |
| 주요 기능  | 특정 패킷은 통과가 허용되며, 특정 패킷은 차단. 예: 승인된 트래픽은 허용, 불법적 액세스 시도는 차단. |
| 관리     | 네트워크 관리자가 트래픽 출입을 제어.                                       |

#### 방화벽의 목표

| 목표            | 설명                            |
| ------------- | ----------------------------- |
| 모든 트래픽 방화벽 통과 | 외부와 내부를 오가는 모든 트래픽은 방화벽을 거친다. |
| 승인된 트래픽만 허용   | 로컬 보안 정책에 따라 승인된 트래픽만 통과 허용.  |
| 방화벽 자체의 안전성   | 방화벽 자체가 침입 시도에 안전해야 한다.       |

#### 방화벽의 주의점

| 주의점            | 설명                                  |
| -------------- | ----------------------------------- |
| 설정 오류          | 잘못된 규칙 설정은 승인된 트래픽까지 차단할 위험이 있음.    |
| 성능 저하          | 복잡한 규칙 세트는 네트워크 속도를 저하시킬 수 있음.      |
| 신뢰할 수 있는 관리 필요 | 규칙 변경 및 유지보수는 신뢰할 수 있는 관리자가 수행해야 함. |

#### 전통적인 패킷 필터

| 항목        | 설명                                                              |
| --------- | --------------------------------------------------------------- |
| 게이트웨이 라우터 | ISP에 연결된 라우터로 외부와 내부 트래픽을 관리. 승인된 데이터만 통과.                      |
| 필터링 기준    | IP 주소, 프로토콜 타입, 포트, TCP 플래그, ICMP 메시지 타입, 라우터 인터페이스별 규칙 등.      |
| 필터링 예시    | 공개 웹 서버 접속을 제외한 TCP 연결 차단: 목적지 포트 80번 TCP SYN 세그먼트를 제외한 나머지 차단. |

#### 상황 고려 패킷 필터

| 항목     | 설명                                                                |
| ------ | ----------------------------------------------------------------- |
| 작동 원리  | TCP 연결 상태를 추적하여 패킷 차단 결정. 연결 고려 테이블 사용.                           |
| 주요 기능  | SYN, SYNACK, ACK, FIN 패킷 추적, 비활성 연결 종료.                           |
| 필터링 예시 | 외부에서 조작된 패킷(출발지 포트 80, ACK 플래그 설정) 차단: 연결 테이블 확인 후 허가되지 않은 패킷 차단. |

#### 애플리케이션 게이트웨이

| 항목    | 설명                                                        |
| ----- | --------------------------------------------------------- |
| 정의    | 특정 애플리케이션 데이터가 반드시 통과해야 하는 맞춤형 서버. 패킷 필터와 결합하여 세밀한 보안 제공. |
| 작동 과정 | 사용자 ID 확인 후 허가된 사용자만 외부 호스트와 연결 설정.                       |
| 단점    | 애플리케이션별 별도 게이트웨이 필요, 성능 저하, 클라이언트 소프트웨어와의 통신 필요.          |

#### 익명성과 사생활 보호

| 항목 | 설명                                                                                                    |
| -- | ----------------------------------------------------------------------------------------------------- |
| 방법 | 신뢰할 수 있는 프록시 서버와 SSL 조합 사용.                                                                           |
| 예시 | 프록시 서버가 요청 대리 처리로 사용자의 IP 주소 숨김, SSL로 암호화된 요청 복호화 후 웹사이트에 전달. -> 근데 프록시서버는 결국 접속자의 모든걸 아므로 사용시 주의 요함! |

---

### 8.9.2 침입 탐지 시스템 (IDS)

#### IDS 개념

| 항목  | 설명                                           |
| --- | -------------------------------------------- |
| 정의  | 패킷 헤더 및 자세한 패킷 관찰을 통해 악의적 트래픽 탐지 및 경고 발생.    |
| IPS | 의심스러운 트래픽 차단 시스템으로 IDS의 확장 개념.               |
| 구성  | 다수의 장치 협력, 중앙 IDS 프로세서로 데이터 전달 후 분석 및 경고 생성. |

#### IDS의 유형

| 유형          | 설명                                                         |
| ----------- | ---------------------------------------------------------- |
| 시그니처 기반 IDS | 공격 시그니처 데이터베이스와 비교. 일치 시 경고 발생. 단점: 새로운 공격 대응 불가, 성능 저하.   |
| 이상 기반 IDS   | 트래픽 분석표 기반 비정상적인 패킷 스트림 탐지. 예: ICMP 패킷 빈도 증가, 포트 정보 수집 증가. |

#### IDS와 방화벽 비교

| 항목      | 방화벽                               | IDS                                |
| ------- | --------------------------------- | ---------------------------------- |
| 주요 목적   | 승인된 트래픽만 허용, 비승인 트래픽 차단.          | 악의적인 트래픽 탐지 및 경고 발생.               |
| 작동 방식   | IP 주소, 포트 번호 등 기본 규칙 기반으로 패킷 필터링. | 패킷을 세밀히 분석하여 시그니처 또는 비정상적인 행동을 탐지. |
| 반응      | 주로 사전 예방적 차단.                     | 의심스러운 트래픽 발생 시 경고 또는 차단.           |
| 성능 요구사항 | 상대적으로 낮음.                         | 패킷 세부 분석 및 높은 연산 요구로 성능 부담이 큼.     |

---

#### 추가 설명 및 비유

| 비유       | 설명                                              |
| -------- | ----------------------------------------------- |
| 패킷 필터    | 우체국 직원이 발신지와 수신지 정보를 확인해 승인된 소포만 배달.            |
| 상황 고려 필터 | 소포 송장 정보를 확인해 승인된 소포만 통과.                       |
| IDS와 IPS | IDS는 도로 CCTV로 이상 차량 발견, IPS는 이상 차량을 차단하는 경찰 역할. |

