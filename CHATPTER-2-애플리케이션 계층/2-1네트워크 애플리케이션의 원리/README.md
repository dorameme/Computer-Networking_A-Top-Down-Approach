# 네트워크 애플리케이션의 원리

## 2.1.1 네트워크 애플리케이션 구조 

### 애플리케이션 구조는 네트워크 구조와 분명히 다르다.
애플리케이션 개발자 관점에서 네트워크 구조는 고정되어있으며 애플리케이션에 특정 서비스 집합을 제공한다.   
반면, 애플리케이션 구조 는 개발자에 의해 설계되고 다양한 종단시스템이 어떻게 조직되어야하는지 결정한다.      
대부분 우수한 구조로 클라이언트-서버구조, 혹은 P2P구조를 사용한다.  

### 클라이언트-서버구조
- 하나의 서버로 모든 호스트의 요청을 받는건 쉽지않으므로, 주로 서버는 많은 수의 호스트를 가진 데이터센터로 가상의 서버를 생성한다.  
  이러한 데이터센터를 유지하는데 서비스제공자들은 대역폭과 상호연결에 대한 비용을 지불해야한다.
- 클라이언트는 서로 직접적으로 통신하지 않는다.
- 서버는 항상 켜져있는 호스트를 서버하고 한다.
- 서버는 클라이언트라는 다른 호스트의 요청을 받는다.
- 서버는 고정 IP주소라는 잘 알려진 주소를 가진다.

### P2P구조
- 항상켜져있는 서버에 최소로 의존한다.
- 피어라는 간헐적으로 연결된 호스트 쌍들이 직접 소통한다.
- 피어는 서비스제공자가 소유하지않고 말단인 사용자들이 제어하는 랩톱이나 데스크톱이다.
- P2P는 피어끼리 직접통신하므로 (특정 서버를 통해 통신하지않으므로) P2P구조하고 한다.
- '자가확장성'을 가진다. 각 피어들은 파일을 분배함으로써 시스템의 서비스 능력을 추가한다.
- '비용효율적'이다. 상당한 서버 기반구조와 서버대역폭을 요구하지 않기때문.
- 분산구조의 특성을 가지므로 보안, 성능, 신뢰성에 대한 도전을 맞고있다.
---
## 2.1.2 프로세스 간 통신
- 운영체제 용어에서 실제로 통신하는 것은 프로그램이 아닌 프로세스이다.
- 2개의 다른 종단 시스템에서 프로세스는 컴퓨터네트워크를 통해 메세지교환으로 서로 통신한다.

### 클라이언트와 서버 프로세스
- 웹에서 브라우저는 클라이언트프로세스, 웹서버는 서버프로세스.
- P2P에서 파일을 올리면 서버 내려받으면 클라이언트,
  P2P에서 클라이언트도 서버가 될수있고 서버도 클라이언트가 될 수 있다.
- 프로세스간 통신에서 두 프로세스간 통신에서 통신을 초기화하는 쪽이 클라이언트 ,   
  세션을 시작하기 위해 접속을 기다리는 프로세스를 서버라고 한다.
- 웹 브라우저는 웹 서버 프로세스와 접속을 초기화 하므로 클라이언트, 웹서버 프로세스는 서버이다.

### 프로세스와 컴퓨터 네트워크 사이의 인터페이스
- 프로세스는 소켓을 통해 네트워크로 메세지를 주고받는다.
- 소켓은 애플리케이션과 네트워크 사이의 API라고도 한다.  
  소켓을 통해 애플리케이션의 데이터가 네트워크로 나갈 수 있기 때문 출입문 같은거임.
- 애플리케이션 개발자는 소켓의 애플리케이션계층에 대한 모든 통제권을 가지지만 소켓의 트랜스포트계층에 대한 통제권은 거의 갖지 못한다.
  1. 트랜스포트 프로토콜의 선택, 2.최대 버퍼와 최대 세그먼트 크기 같은 계층 매개변수의 설정 정도 조절가능.

### 프로세스 주소 배정
- 목적지 호스트의 주소와, 목적지 호스트 내의 수신 프로세스를 명시하는 식별자가 필요하다.
- 호스트는 유일하게 IP주소로 식별된다. 수신 프로세스는 port번호로 식별된다.

## 2.1.3 애플리케이션의 이용 가능한 트랜스포트 서비스
애플리케이션<->소켓(문)<->네트워크
- 트랜스포트계층이 네트워크를 통해 메세지를 수신소켓으로 옮기는 책임이 있다.    
  트랜스포트계층이 제공할 수 있는건 신뢰적 데이터 전송, 처리율, 시간, 보안이라는 네가지 차원으로 분류가능하다.

### 신뢰적 데이터 전송
- 어느정도 패캣의 손실을 감안하는 애플리케이션을 '손실 허용 에플리케이션' 이라고 한다.   
   ex) 오다오 , 동영상
   
### 처리량
- 네트워크안에서 대역폭을 공유하므로 가용 처리율은 시간에 따라 변동된다.
- 처리율요구사항을 가지는 애플리케이션을 '대역폭 민감 애플리케이션'이라고 한다.
  반면, 처리율에 융통성있는 애플리케이션을 '탄력적 애플리케이션'이라고 한다.

### 시간
- 상호 작용 실시간 애플리케이션에선 데이터 전송에 엄격한 시간제한 조건을 요구한다.

### 보안
- 트랜스포트 프로토콜은 하나 이상의 보안 서비스를 제공 할 수 있다.
  ex) 무결성과 종단인증
---
## 2.1.4 인터넷 전송 프로토콜이 제공하는 서비스

- 인터넷은 애플리케이션에게  TCP, UDP라는 2개의 전송 프로토콜을 제공한다.
  따라서 애플리케이션 개발자는 TCP, UDP 중 하나의 선택을 한다.

### TCP 서비스 
- 연결지향형(핸드쉐이킹) 신뢰적 데이터전송을 포함.
- 연결지향형 : 클라이언크와 서버는 서로 전송 제어정보를 교환한다.
  동시에 서로 메세지 전달이 가능하다. 따라서 '전이중 연결' 이라고 한다.

  ### 보안 TCP
  SSL이라고 한다.   
  암호화, 데이터무결성, 종단인증을 제공하며 트랜스포트 계층이 아닌 **애플리케이션 계층**에서 구현된 것으로 TCP를 강화한 것이다.
  
### UDP 서비스
- 최소의 서비스 모델을 가지는 가장 단순한 프로토콜.
- 비연결형 즉, 핸드쉐이킹을 하지않는다.
- 비신뢰적 전송 서비스 제공. 순서나 손실등을 보장하지 않는다.
- 혼잡제어또한 포함하지 않는다 -> 따라서 송신 측은 원하는 속도로 하위계층에 전달이 가능하다.


### 인터넷 트랜스포트 프로토콩이 제공하지 않는 서비스

- 트랜스포트 서비스로 가능하건 신뢰적 데이터 전송, 처리율, 시간, 보안이라는 네가지 차원으로 서비스를 구성하였다.
  그렇다면  TCP, UDP 는 이중에 어느 것들을 제공하는가?

- TCP는 신뢰적 종단간 데이터 전송을 제공한다.
  보안 서비스를 제공하기 위헤 애플리케이션 계층에서 SSL 을 통해 쉽게 강화될 수 있다.

- 하지만 우리는 TCP,UDP에서 처리율 혹은 시간보장에 대한 언급을 안했다.   
  - TCP는 신뢰적 전송을 보장하지만, 처리율 및 시간에 대한 보장은 하지 않는다.   
  - UDP는 빠른 전송이 가능하지만, 신뢰성, 처리율, 시간 보장 모두 제공하지 않는다.
---
## 1. 제공하는 서비스
### TCP (Transmission Control Protocol)
- 신뢰성 (Reliability): 데이터의 전송이 보장되며, 패킷 손실 시 재전송을 수행한다.
- 흐름 제어 (Flow Control): 송신자가 수신자의 처리 속도에 맞춰 전송 속도를 조절한다.
- 혼잡 제어 (Congestion Control): 네트워크의 혼잡을 감지하고 전송 속도를 조절한다.
- 순서 보장 (Ordered Delivery): 데이터가 전송된 순서대로 수신된다.

### UDP (User Datagram Protocol)
- 비신뢰성 (Unreliable): 신뢰적 전송을 보장하지 않지만, 빠른 전송이 가능하다.
- 비연결성 (Connectionless): 연결 설정 없이 데이터를 전송한다.
- 낮은 오버헤드: 추가적인 제어 정보가 적어 처리 속도가 빠르다.
---
## 2. 제공하지 않는 서비스
- TCP, UDP 모두 처리율(Throughput) 보장 없음

- 최대 처리량에 대한 보장은 제공하지 않는다.  
네트워크 상태에 따라 처리량이 변동된다.  
TCP, UDP 모두 시간(Time) 보장 없음  

- 지연 시간(latency) 보장 및 전송 시간 보장을 제공하지 않는다.   
실시간 성능을 요구하는 애플리케이션에서는 별도의 프로토콜(RTP 등)이 필요하다.    
보안(Security) 직접 제공 없음

      TCP는 보안을 기본적으로 제공하지 않는다. 대신 SSL/TLS를 통해 보안을 강화할 수 있다.
      UDP 또한 보안 기능을 직접 제공하지 않으며, DTLS(Datagram TLS)를 사용하여 보안 기능을 추가할 수 있다.

---
## 2.1.5 애플리케이션 계층 프로토콜
- 애플리케이션 계층 프로토콜은 프로세스가 서로 메세지 보내는 방법을 정의한다.
  - 교환 메세지 타입
  - 여러 메세지 타입의 문법
  - 필드의 의미
  - 언제, 어떻게 전송하고 응답할지 규칙
-  애플리케이션 계층 프로토콜은 네트워크 애플리케이션의 한 요소이다.

## 2.1.6 이책에서 다루는 네트워크 애플리케이션
- 웹, 파일전송, 전자메일, 디렉터리서비스, 비디오 스트리밍, P2P 애플케이션
  웹을 먼저 다루는데 이는 매우 인기있으며, 애플리케이션 게층의 프로트콜인 HTTP를 이해하기 쉽기때문.
  그다음 HTTP 와 좋은 대조를 이루는 FTP에 대해 다룬다.
  
