# 네트워크 코어
## 회선교환 & 패킷교환
- 통신링크와 스위치 네트워크를 통해 데이터를 이동시키는 방식에는 크게 회선교환과 패킷교환이 있다.
- 회선교환 네트워크는 예약시스템 , 패킷교환은 온디멘드 형식으로 자원을 요청하고 사용한다.

## 1.3.1 패킷 교한
- 각 패킷은 통신링크와 패킷스위치(라우터와 링크계층스위치) 를 거치게 된다.
- 인터넷은 최대한 빠르게 패킷을 전달하려하겠지만, 일정 시간 내에 전달을 보장하지 않는다.

패킷스위치가 R bits/sec 의 속도로 L bits의 패킷을 송신하는데 걸리는 시간은 L/R 초이다.

### 저장 후 전달
- 대부분의 패킷스위치는 '저장 후 전달' 방식을 이용한다.
- 각 패킷을 하나씩 완전히 수신한 후 전송을 시작하는 방식


| **패킷 수** | **전송 방식**         | **시간 계산식**                                                | **총 시간 (L/R)** |
|-------------|-----------------------|----------------------------------------------------------------|-------------------|
| 1개         | 저장 후 전달          | 수신 **L/R** + 전송 **L/R**                                    | **2L/R**         |
| 1개         | 바로 전송             | 수신 시작 즉시 전송 **L/R**                                    | **L/R**          |
| 3개         | 저장 후 전달          | 1번: **L/R + L/R**, 2번: **2L/R + L/R**, 3번: **3L/R + L/R**   | **4L/R**         |
| 3개         | 바로 전송             | 1번: **L/R**, 2번: **2L/R**, 3번: **3L/R**                     | **3L/R**         |

---


### 큐잉지연 과 패킷손실
- 각 패킷스위치는 **출력 큐**(출력버퍼)를 가지고있으며 이로인해 패킷을 버퍼에서 출력하는 큐잉지연 또한 발생한다.
  - 이 지연은 가변적이며 네트워크의 혼잡정도를 따른다. 
- 큐잉 지연에 의해 버퍼에 패킷이 꽉 차있으면 패킷 손실이 발생한다.
  - 이떄 도착하는 패킷 혹은 이미 대기중인 패킷을 drop한다.

### 전달 테이블과 라우팅 프로토콜
- 라우팅 프로토콜로 각 라우터부터 목적지 까지의 최단경로를 결정
- 전달테이블을 설정하는데 이 최단 경로 결과를 이용

---
## 1.3.2 회선교환
- 네트워크가 회선을 설정할 때, 그 연결이 이루어지는 동안 네트워크 링크에 일정한 전송률을 에약한다.
  - 따라서 보장된 일정 전송률로 데이터를 보낼 수 있다.
- 주파수 분할 다중화(FDM) & 시-분할 다중화 (TDM)으로 구현가능
- 
  <img width="361" alt="스크린샷 2025-01-02 오후 6 52 14" src="https://github.com/user-attachments/assets/f99abcf8-5c00-4ac3-8ded-43a21da45b79" />

---

### 회선교환 vs 패킷교환

| **구분**          | **패킷 교환**                          | **회선 교환**                         |
|-------------------|--------------------------------------|-------------------------------------|
| **전송 방식**     | 데이터를 작은 **패킷 단위**로 나눠 전송 | 통신 전에 **전용 회선**을 설정하고 전송 |
| **경로 설정**     | 각 패킷이 **독립적 경로**로 전송됨      | 통신 중에는 **고정 경로** 사용       |
| **연결 설정**     | 연결 설정 없이 **패킷 전송** 가능       | 통신 전에 **경로 설정(전화 연결)** 필요 |
| **전송 효율**     | 네트워크 자원 공유로 **효율적 사용**    | 전용 회선 점유로 **비효율적 사용**   |
| **지연 시간**     | 패킷마다 경로가 달라 **지연 시간 변동** | 경로 고정으로 **일정한 지연 시간** 유지 |
| **오류 처리**     | 패킷 손실 시 **재전송 및 오류 처리 용이** | 회선 장애 발생 시 **재설정 필요**   |
| **비용**          | **저렴함** (자원 공유로 비용 절감)     | **비쌈** (전용 회선 사용 비용 발생) |
| **예시**          | **인터넷(IP 네트워크)**, 이메일 등      | **전화 통화**, 팩스 등               |

### **요약**  
- **패킷 교환:** 데이터 전송의 유연성과 효율성이 높음. 인터넷과 같은 현대 네트워크에서 주로 사용됨.  
- **회선 교환:** 실시간 음성 통화처럼 **연속적인 데이터 전송**에 적합하지만 자원 점유로 비효율적임.  
---
## 1.3.3 네트워크의 네트워크

### 네트워크 구조 1
- **설명**: 하나의 네트워크가 다른 네트워크와 연결되는 기본적인 구조
- **예시**: 집에서 인터넷을 사용하는 것은 ISP 네트워크와 연결되는 형태

### 네트워크 구조 2
- **설명**: 여러 네트워크가 상호 연결되어 더 복잡한 구조가 되는 형태
- **예시**: 회사의 여러 사무실 네트워크가 인터넷과 연결되어 있는 형태

### 네트워크 구조 3
- **설명**: 여러 네트워크가 대규모로 연결되어 상호작용하는 구조
- **예시**: 인터넷은 전 세계의 다양한 네트워크가 연결된 형태로, 구글과 아마존 같은 대기업 네트워크도 서로 연결되어 있다

### 네트워크 구조 4
- **PoP (Point of Presence)**: 물리적 접속 지점 제공. 각 ISP는 PoP를 통해 다른 ISP와 연결되어 데이터 전송을 수행한다.  
  **예시**: 집에서 인터넷을 사용하려면 ISP의 PoP를 통해 연결된다.

- **멀티-홈 (Multi-homing)**: 두 개 이상의 ISP와 연결되어 서비스 제공자 중 하나가 연결되지 않더라도 인터넷 패킷을 계속 송수신 할 수 있다.  
  **예시**: 기업은 두 개 이상의 ISP와 연결하여 하나의 ISP 장애 시 다른 ISP를 통해 연결을 유지한다.

- **피어링 (Peering)**: 두 ISP가 서로 네트워크를 연결하여 데이터를 교환하지만, 요금을 지불하지 않는다.  
  **예시**: 구글과 아마존은 서로 피어링하여 데이터 교환 비용을 절감한다.

- **IXP (Internet Exchange Point)**: 여러 ISP들이 피어링할 수 있는 만남의 장소.  
  **예시**: 서울의 IXP에서 여러 ISP들이 서로 피어링하여 트래픽을 효율적으로 교환한다.

### 네트워크 구조 5
- **설명**: 다중 계층 구조와 다양한 네트워크 요소들이 결합된 복합적인 구조.  
  **예시**: 구글은 자체 사설 네트워크를 통해 전 세계의 데이터 센터를 연결하고 (예를 들어 CDN), 이를 통해 인터넷과 분리된 방식으로 서비스를 제공한다.
