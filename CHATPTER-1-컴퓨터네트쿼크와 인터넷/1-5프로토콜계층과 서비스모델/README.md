# 프로토콜계층과 서비스모델

## 1.5.1 계층구조
- 각 계층은 아래계층과 연대하여 서비스를 구현한다.
- 시스템은 계층구조를 통해 다른 계층에 영향을 주지않고 서비스를 변화시키는 것이 가능하게 한다. 즉 독립성을 가진다.
- 크고 복잡한 시스템을 계층화 함으로써 특정 일부분에 대해서 논의하는 것을 쉽게 만든다.

### 프로토콜 계층화
- 프로토콜 계층은 소프트웨어와 하드웨어 또는 둘의 통합으로 구현할 수 있다.
  - HTTP, SMTP 같은 애플리케이션 계층 프로토콜은 대부분 소프트웨어로 구현되어있다.
  - TCP, UDP 같은 트랜스포트 계층 프로토콜도 대부분 소프트웨어적으로 구현된다.
  - IP, ICMP, ARP 네트워크 계층은 종종 하드웨어와 소프트웨어의 혼합으로 구현된다.
  -  광케이블, 동축케이블, 리피터, 허브 같은 물리계층이랑 Ethernet, Wi-F 같은  데이터링크 계층은 대부분 하드웨어적으로 구현된다.

- 몇 연구자들을 이러한 계층화를 반대하는데
  - 1. 계층화의 잠재된 결점 중 하나는 한 계층의 기능이 하위계층과 기능적으로 중복된다는 것이다  
       예를들어) 많은 프로토콜 스택이 링크와 종단시스템 모두에서의 오류복구기능을 제공한다.  
    2. 한계층에서의 기능이 다른 계층에서 존재하는 (예:타임스탬프값) 을 필요로 할 수 있다는 점이다. 이것은 계층 분리의 목적에 위배된다.  

### OSI 7계층 과 TCP/IP 5계층
- TCP/IP 7계층이 산업의 표준이다.  (OSI 7계층가 늦게나왔다. 이론적으로만 알면됨)    
 물리계층 - 데이터링크계층 - 네트워크계층 - 트랜스포트계층 -( 세션계층 - 프레젠테이션계층 )- 애플리케이션계층  
- 이제부터 하향식으로 알아보자!!  
  상위 계층은 개념적이고 소프트웨어 중심인 반면, 하위 계층은 하드웨어 및 물리적 처리에 가까워 상대적으로 복잡하다.  
  따라서 하향식 접근법은 쉬운 개념부터 시작해 점진적으로 복잡한 구조로 이동하기 때문에 부담을 줄일 수 있다.  

### 애플리케이션 계층  
- **기능**: 사용자에게 네트워크 서비스 제공.  
- **프로토콜**: HTTP(웹문서 전송), FTP(파일 전송), SMTP(메일 전송) 등.  
- **패킷 이름**: 메시지.  


### 트랜스포트 계층  
- **기능**: 신뢰성 있는 데이터 전송과 오류 제어.  
- **프로토콜**: TCP(연결 지향), UDP(비연결 지향).  
- **패킷 이름**: 세그먼트.  


### 네트워크 계층 (IP 계층)  
- **기능**: 주소 지정 및 경로 선택(라우팅).  
- **프로토콜**: IP(주소 지정 및 패킷 전달), ICMP(오류 보고 및 진단).  
- **패킷 이름**: 데이터그램.  
- **특징**: IP가 인터넷을 묶는 핵심 역할 수행.  

### 링크 계층  
- **기능**: 인접한 노드 간 데이터 전송 및 오류 검출.  
- **프로토콜**: 이더넷, Wi-Fi, PPP.  
- **패킷 이름**: 프레임.  

### 물리 계층  
- **기능**: 비트의 전기적 또는 광학적 전송.  
- **전송 매체**: 광케이블, 꼬임쌍선, 동축케이블 등.  
- **특징**: 프레임 내부의 각 비트를 다른 노드로 이동.

---

### 프레젠테이션 계층
- 데이터의 의미해석
- 데이터압축 미 데이터암호화

### 세션 계층
- 데이터교환의 경계와 동기화를 제공
- 체킹포인트와 회복방법을 제공

### 왜 위 2계층이 TCP/IP에선 없는가? 필요가 없는가?
- 개발자에게 달려있다. 그 서비스가 필요하다면 기능을 애플리케이션에 넣으면 된다.

## 1.5.2 캡슐화 (데이터 전달)
- 각 계층에서의 패킷은 헤더필드(현재 계층의 헤더)& 페이로드 필드(상위 계층으로부터의 패킷)를 가진다.
- 이는 애플리케이션 계층에서 편지를 쓰면 각 계층으로 내려가며 봉투에 넣어 전달하는(헤더를 붙이는)것으로 비유할 수 있다.
- 전달받은 수신자는 캡슐호의 반대과정을 통해 편지를 볼 수 있다.
