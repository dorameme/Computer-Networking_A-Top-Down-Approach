### 6.1 링크 계층 소개

---

#### 링크 계층이란?
링크계층은 노드와 링크로 이루어져 있다.
1. 노드(Node)
   링크 계층 프로토콜을 실행하는 장치이다.
   예: 호스트, 라우터, 스위치, AP등등
2. 링크(Link)
   통신 경로상의 인접 노드들을 연결하는 통신 채널이다.
   데이터를 출발지에서 목적지로 이동시키기 위해 데이터그램은 경로상의 개별 링크들을 통과해야 한다.
   하나의 링크에서 전송 노드는 데이터그램을 링크 계층 프레임(link-layer frame)으로 캡슐화하여 전송한다.
---

#### 6.1.1 링크 계층이 제공하는 서비스

1. 프레임화(Framing)
   - 데이터그램을 전송하기 전, 링크 계층 프레임에 캡슐화한다.
   - 프레임 구조: 데이터그램을 포함하는 데이터 필드와 여러 헤더 필드로 구성된다.

2. 링크 접속(Link Access)
   - 매체 접속 제어(MAC) 프로토콜은 링크상에서 프레임을 전송하는 규칙을 명시한다.
   - 점대점 링크:
     단일 송신자와 수신자로 구성된 링크에서 MAC은 단순하며, 링크가 비어 있으면 바로 프레임 전송이 가능하다.
   - 브로드캐스트 링크:
     여러 노드가 하나의 링크를 공유할 경우, MAC 프로토콜이 각 노드의 프레임 전송을 조율한다.

   비유: 브로드캐스트 링크는 여러 사람이 사용하는 단체 채팅방과 같으며, MAC 프로토콜은 사람들이 동시에 메시지를 보내지 않도록 조율한다.

3. 신뢰적 전달(Reliable Delivery)
   - TCP와 유사하게 확인 응답 및 재전송을 통해 오류를 정정한다.
   - TCP가 종단 간 오류를 처리하는 것과 달리, 링크 계층은 특정 링크에서의 오류를 정정한다.
   - 사용 예:
     - 무선 링크: 높은 오류율로 인해 신뢰적 전달이 필수적이다. 예를 들어, Wi-Fi 네트워크는 신호 약화와 간섭으로 데이터 손실이 발생할 가능성이 높다. 이를 보완하기 위해 확인 응답과 재전송 메커니즘이 사용된다.
     - 유선 링크: 오류율이 매우 낮아 신뢰적 전달 메커니즘이 불필요하며, Ethernet과 같은 네트워크는 이를 생략해 효율성을 높인다.

   비유: 신뢰적 전달은 택배 기사가 손상된 물건을 발견하면 다시 포장해 안전하게 배달하는 것과 비슷하다.

4. 오류 검출과 정정(Error Detection and Correction)
   - 오류 검출:
     송신 노드가 오류 검출 비트를 설정하고 수신 노드가 이를 검사하여 데이터 오류를 감지한다.
   - 오류 정정:
     오류가 발생한 위치를 정확히 찾아내 수정한다.
   - 트랜스포트 및 네트워크 계층보다 복잡하며, 일반적으로 하드웨어로 구현된다.

   비유: 오류 검출은 책의 페이지가 찢어졌는지 확인하는 작업이고, 오류 정정은 찢어진 페이지를 테이프로 붙이는 작업이다.

---

#### 6.1.2 링크 계층의 구현 위치

1. 네트워크 어댑터(Network Adapter)    
 네트워크 어댑터는 NIC를 포함한 전체 하드웨어 장치를 의미
   - 대부분의 링크 계층 기능은 네트워크 인터페이스 컨트롤러(NIC)에서 구현된다.
   - 라우터에서는 라인 카드에 구현된다.
-      네트워크 어댑터(Network Adapter)는 하드웨어 장치로,
       네트워크 인터페이스 컨트롤러(NIC, Network Interface Controller)가 어댑터 내부에 포함된 핵심 구성 요소이다. 
       NIC는 네트워크 어댑터의 중심으로, 링크 계층의 주요 기능이 구현된 특수 용도 칩이다. 
       NIC는 데이터를 송수신하며, 데이터그램을 링크 계층 프레임으로 캡슐화하거나 반대로 프레임에서 데이터그램을 추출하는 역할을 수행한다.
       따라서, 네트워크 어댑터는 NIC를 포함한 전체 장치를 의미하며, NIC는 이 어댑터 내부에서 실제 링크 계층 서비스를 제공하는 주요 하드웨어라고 보면 된다.
2. 네트워크 어댑터의 주요 구성 요소       
 NIC은 컨트롤러와 CPU를 포함
   - 컨트롤러(Controller):
     - 링크 계층 서비스의 대부분이 구현된 특수 용도 칩이다.
     - 송신 측: 데이터그램을 프레임으로 캡슐화하고 링크로 전송한다.
     - 수신 측: 프레임을 수신하여 네트워크 계층 데이터그램을 추출한다.
   - CPU:
     - 일부 고급 링크 계층 기능이 소프트웨어로 구현되어 있다.
     - 예: 링크 계층 주소 관리, 오류 처리, 데이터그램 전달 등.

4. 하드웨어와 소프트웨어의 조합:
   링크 계층은 컨트롤러(하드웨어)와 CPU 기반 소프트웨어가 협력하여 동작한다.

   비유: 하드웨어(컨트롤러)는 공장에서 상품을 만드는 기계이고, 소프트웨어(CPU)는 기계를 제어하는 관리자이다.

---

### 핵심 정리

1. 링크 계층은 데이터를 프레임화하고, 링크 접속 관리, 신뢰적 전달, 오류 검출 및 정정 등의 서비스를 제공한다.
2. 링크 계층은 네트워크 어댑터(NIC)를 중심으로 하드웨어와 소프트웨어의 협력을 통해 구현된다.
3. 데이터그램은 출발지에서 목적지까지 이동하며 여러 링크와 노드를 통과하며 전송된다.

