### 5.7 네트워크 관리와 SNMP, NETCONF/YANG

#### 네트워크 관리(Network Management)
네트워크 관리는 조직의 네트워크 인프라를 모니터링하고 제어하며 최적화하는 활동이다. 네트워크 관리는 **FCAPS**라는 5가지 주요 기능으로 구성된다.

1. **Fault Management (장애 관리)**  
   - 네트워크 장애를 탐지하고 해결한다.
   - 장애가 발생했을 때 경고를 생성하고 문제를 해결하는 프로세스를 관리한다.

2. **Configuration Management (구성 관리)**  
   - 네트워크 장치의 설정을 관리하고 변경 이력을 추적한다.
   - 새로운 장비 추가 시 초기 설정 작업을 효율적으로 수행한다.

3. **Accounting Management (계정 관리)**  
   - 네트워크 사용량 데이터를 수집하고 분석한다.
   - 네트워크 자원의 과금 및 사용 정책을 정의한다.

4. **Performance Management (성능 관리)**  
   - 네트워크의 성능 지표(대역폭, 지연, 패킷 손실 등)를 모니터링한다.
   - 성능 저하가 발생할 경우 이를 분석하고 해결한다.

5. **Security Management (보안 관리)**  
   - 네트워크 보안 정책을 설정하고 침입 및 위협을 탐지 및 방지한다.
   - 네트워크 자원 접근에 대한 인증과 권한 관리를 수행한다.

---

#### SNMP (Simple Network Management Protocol)
**SNMP**는 네트워크 관리 프로토콜로, 네트워크 장치(라우터, 스위치, 서버 등)의 정보를 모니터링하고 제어하기 위해 사용된다.

1. **구조**
   - **Manager**: 관리 기능을 수행하며, 네트워크 장치로부터 데이터를 수집하고 명령을 전송한다.
   - **Agent**: 네트워크 장치 내에서 실행되며, 데이터를 수집하고 요청에 따라 이를 Manager에 제공한다.
   - **MIB (Management Information Base)**: 관리할 수 있는 장치의 정보를 저장한 데이터베이스.

2. **동작**
   - **Get**: Manager가 Agent에 정보를 요청한다.
   - **Set**: Manager가 Agent에 데이터를 설정한다.
   - **Trap**: Agent가 Manager에게 비동기적으로 경고를 전송한다.

3. **장점**
   - 간단한 프로토콜로 구현이 쉽고 효율적이다.
   - 다양한 벤더 장치와 호환된다.

4. **단점**
   - 보안이 취약(SNMPv1, v2의 경우 암호화되지 않음).
   - 대규모 네트워크에서는 확장성과 세부 제어에 한계가 있다.

---

#### NETCONF/YANG
NETCONF와 YANG은 **네트워크 구성 관리 및 프로그래밍**을 위해 설계된 최신 기술이다.

1. **NETCONF (Network Configuration Protocol)**
   - IETF에서 표준화된 프로토콜로, 네트워크 장치의 구성 데이터를 관리하고 조작한다.
   - XML 또는 JSON을 사용하여 데이터 교환을 수행한다.
   - 주요 기능:
     - **Get-config**: 장치의 설정을 읽는다.
     - **Edit-config**: 장치의 설정을 수정한다.
     - **RPC (Remote Procedure Call)**: 원격으로 명령을 실행한다.

2. **YANG (Yet Another Next Generation)**
   - NETCONF에서 사용하는 데이터 모델링 언어이다.
   - 네트워크 장치의 구성 데이터를 정의하는 데 사용된다.
   - 계층적 구조로 설계되어 데이터의 명확성과 일관성을 높인다.
   - 주요 구성 요소:
     - **module**: 데이터 모델의 기본 단위.
     - **container**: 데이터 그룹을 나타냄.
     - **leaf**: 개별 데이터 요소를 정의함.

3. **NETCONF/YANG의 장점**
   - **표준화**: 여러 벤더 간의 호환성을 제공.
   - **자동화**: 대규모 네트워크의 설정 작업을 자동화.
   - **보안성**: SSH를 통해 보안 통신 지원.

4. **NETCONF/YANG vs SNMP**
   | 특징                | SNMP                           | NETCONF/YANG                 |
   |---------------------|--------------------------------|------------------------------|
   | **목적**            | 네트워크 모니터링 및 제어       | 네트워크 구성 관리            |
   | **데이터 표현 방식** | MIB 기반                      | XML/YANG 데이터 모델          |
   | **보안성**          | 제한적 (SNMPv1/v2)             | 높은 보안 (SSH 기반)          |
   | **자동화 지원**      | 제한적                        | 강력한 자동화 지원            |

---

#### 결론
- SNMP는 단순한 네트워크 모니터링 및 관리에 적합하며, 기존 시스템에서 널리 사용된다.
- NETCONF/YANG은 복잡하고 대규모 네트워크 환경에서 **구성 관리**와 **자동화**를 지원하기 위해 설계된 현대적인 솔루션이다.  
- 네트워크 관리의 요구 사항과 환경에 따라 SNMP 또는 NETCONF/YANG을 적절히 선택해야 한다.

----


### 네트워크 관리와 SNMP, NETCONF/YANG

#### 1. 네트워크 관리 방식

네트워크 운영자는 다음의 세 가지 방법을 통해 네트워크를 관리할 수 있다.

---

**1.1 CLI (Command Line Interface)**

운영자는 명령줄 인터페이스(CLI)를 통해 네트워크 장치에 직접 명령을 입력한다. 이 방법은 다음과 같은 방식으로 이루어진다:

- **직접 접속**: 운영자가 피관리 장치의 콘솔에서 직접 명령을 입력.
- **원격 접속**: Telnet 또는 SSH를 통해 장치와 연결 후 명령 입력.

**장점**:
- 모든 장치에서 기본적으로 제공되는 방식.

**단점**:
- 명령 입력 과정에서 오류 발생 가능.
- 대규모 네트워크 환경에서 자동화 및 효율적인 관리가 어려움.

---

**1.2 SNMP/MIB (Simple Network Management Protocol/Management Information Base)**

SNMP는 네트워크 장치의 상태를 모니터링하고 제어하기 위해 사용되며, 장치의 MIB 데이터를 질의하거나 설정할 수 있다.

**SNMP의 동작 방식**:
- **요청-응답 모드 (Request-Response Mode)**: 관리 서버가 에이전트에 요청을 보내고, 에이전트는 이에 대한 응답을 제공.
- **트랩 메시지 (Trap Message)**: 에이전트가 이벤트 발생 시 비동기적으로 관리 서버에 알림.

**PDU (Protocol Data Unit) 유형**:
- **GetRequest, GetNextRequest, GetBulkRequest**: MIB 객체 값 요청.
- **SetRequest**: MIB 객체 값을 설정.
- **Response**: 요청에 대한 응답 데이터 제공.
- **Trap**: 관리 서버가 요청하지 않아도 알림을 전송.

**MIB의 역할**:
- 네트워크 장치의 상태 정보 및 동작 데이터를 객체로 저장.
- 예: “라우터에서 버려지는 데이터그램 개수”, “DNS 서버의 소프트웨어 버전” 등.

**단점**:
- 대규모 네트워크 구성 시 장치 개별 관리는 비효율적.
- 자동화 지원이 부족.

---

**1.3 NETCONF/YANG**

NETCONF와 YANG은 대규모 네트워크 관리의 자동화 및 정확성을 높이기 위해 설계된 최신 네트워크 관리 방식이다.

- **NETCONF (Network Configuration Protocol)**:
  - 네트워크 장치의 설정 데이터를 검색, 설정, 수정하는 프로토콜.
  - XML 또는 JSON을 사용하여 데이터를 교환하며, SSH를 통해 보안을 유지.
  - 주요 작업:
    - **<get>**: 장치 설정 데이터를 검색.
    - **<edit-config>**: 장치 설정을 수정.
    - **<close-session>**: 세션 종료.

- **YANG (Yet Another Next Generation)**:
  - 설정 및 동작 데이터를 모델링하는 데 사용되는 데이터 모델링 언어.
  - 계층적 구조를 통해 데이터의 명확성과 일관성을 유지.

**장점**:
- 자동화를 통해 네트워크 설정 효율성을 높임.
- 여러 장치에 대한 중앙집중식 관리 가능.
- 높은 보안 수준.

---

#### 2. SNMP와 MIB

**2.1 SNMP(Simple Network Management Protocol)**

SNMP는 관리 서버와 에이전트 간 정보 교환을 통해 네트워크를 관리한다. SNMP의 주요 특징은 다음과 같다:

- **SNMPv3**:
  - 최신 버전으로, 데이터 통신의 보안성과 인증 제공.

- **요청-응답 모드**:
  - 관리 서버가 피관리 장치의 MIB 객체 값을 요청.
  - 에이전트가 요청에 대한 응답을 제공.

- **트랩 메시지**:
  - 비동기적으로 관리 서버에 이벤트 발생 사실을 알림.
  - 예: 링크 인터페이스 활성화 또는 비활성화.

**2.2 MIB(Management Information Base)**

MIB는 SNMP에서 사용되는 데이터 저장소로, 네트워크 장치의 동작 상태 데이터를 객체로 관리한다.

- **SMI(Structure of Management Information)**:
  - MIB 객체 정의를 위한 규칙 모음.

- **MIB 객체의 예**:
  - 라우터에서 버려진 데이터그램 개수.
  - 네트워크 인터페이스의 에러 횟수.
  - DNS 서버의 소프트웨어 버전.

**단점**:
- 장치 간 데이터 모델의 차이로 인해 통합 관리가 어려움.
- 자동화 및 대규모 관리 기능 부족.

---

#### 3. NETCONF와 YANG

**3.1 NETCONF(Network Configuration Protocol)**

NETCONF는 XML을 기반으로 네트워크 장치의 설정 데이터를 관리하기 위해 설계된 프로토콜이다.

- **특징**:
  - 원격 프로시저 호출(RPC) 방식 사용.
  - 안전한 연결(예: SSH)을 통해 메시지 교환.

- **주요 작업**:
  - **<get>**: 설정 데이터 검색.
  - **<edit-config>**: 설정 데이터 수정.
  - **<close-session>**: 세션 종료.

- **동작 과정**:
  1. 관리 서버와 피관리 장치 간 보안 연결 설정.
  2. <hello> 메시지를 교환하여 지원 기능 확인.
  3. RPC 메시지를 통해 설정 데이터 질의 및 수정.

**3.2 YANG(Yet Another Next Generation)**

YANG은 NETCONF에서 사용하는 데이터 모델링 언어로, 네트워크 설정 및 동작 데이터를 정의한다.

- **구성 요소**:
  - **모듈(module)**: 데이터 모델의 기본 단위.
  - **컨테이너(container)**: 데이터 그룹화.
  - **리프(leaf)**: 개별 데이터 요소.

- **장점**:
  - 표준화된 데이터 모델 제공.
  - 네트워크 설정의 자동화 및 효율성 증대.

---

#### 4. SNMP/MIB와 NETCONF/YANG 비교

| 특징                | SNMP/MIB                     | NETCONF/YANG                |
|---------------------|-----------------------------|-----------------------------|
| **주요 목적**       | 네트워크 상태 모니터링         | 네트워크 설정 및 자동화 관리    |
| **데이터 표현 방식** | MIB 기반                    | XML/YANG 데이터 모델        |
| **보안성**          | 제한적 (SNMPv1/v2)          | 높은 보안 (SSH 기반)         |
| **자동화 지원**      | 제한적                      | 강력한 자동화 지원            |
| **확장성**          | 제한적                      | 높은 확장성                  |

---

#### 결론

네트워크 관리 방식은 네트워크 환경과 요구사항에 따라 다르게 적용된다:
- **CLI**는 단순한 작업에 적합하지만 대규모 네트워크에는 비효율적이다.
- **SNMP/MIB**는 네트워크 모니터링에 강점을 가지지만 자동화 및 설정 관리에는 한계가 있다.
- **NETCONF/YANG**은 대규모 네트워크의 설정 관리와 자동화에 최적화되어 있어, 현대 네트워크 환경에서 더욱 적합한 솔루션이다.



### MIB와 YANG의 차이 표

| 특징                    | MIB (Management Information Base) | YANG (Yet Another Next Generation)       |
|-------------------------|----------------------------------|----------------------------------------|
| **사용 프로토콜**        | SNMP                              | NETCONF (주로 사용)                     |
| **데이터 모델링 언어**   | SMI (Structure of Management Information) | 자체적으로 설계된 YANG 언어             |
| **데이터 구조**          | 트리 구조 (OID 기반)                | 계층적 데이터 구조 (XML/JSON 표현 가능)   |
| **표현 방식**            | 정해진 OID와 단순 데이터 타입 사용     | 자유로운 데이터 모델 정의 (복잡한 데이터 표현 가능) |
| **확장성**               | 제한적 (사전에 정의된 객체에 의존)       | 유연하고 확장 가능 (새로운 데이터 모델 설계 가능) |
| **주요 목적**            | 네트워크 장치 상태 모니터링 및 간단한 제어 | 네트워크 장치 설정 관리 및 자동화          |
| **주요 데이터 표현**     | 스칼라(단일 값), 테이블(다중 값)         | 컨테이너, 리스트, 리프 등 다양한 데이터 요소 |
| **보안성**               | 제한적 (SNMPv1/v2는 보안 약함)          | 높은 보안성 (SSH 기반 NETCONF 지원)      |
| **벤더 간 호환성**        | 일부 한정적 (장치마다 다른 MIB 객체 정의 가능) | 높은 호환성 (표준화된 데이터 모델 제공)    |
| **사용 사례**            | 네트워크 상태 모니터링, 트래픽 분석       | 설정 관리 자동화, 대규모 네트워크 구성 관리  |

---


### XML, YANG, JSON의 차이

| 특징                     | **XML (eXtensible Markup Language)**          | **YANG (Yet Another Next Generation)**         | **JSON (JavaScript Object Notation)**           |
|--------------------------|----------------------------------------------|----------------------------------------------|----------------------------------------------|
| **목적**                 | 데이터를 구조적으로 저장 및 전송                 | 네트워크 설정 및 동작 데이터를 **정의**하는 모델링 언어 | 데이터를 경량화하여 저장 및 전송                 |
| **역할**                 | 데이터의 표현 및 전송                          | 데이터 모델 정의 및 설계 (NETCONF에서 사용됨)     | 데이터의 표현 및 전송                          |
| **구조**                 | 계층적 트리 구조                              | 계층적 트리 구조 (XML 및 JSON으로 표현 가능)      | 키-값 쌍 (Key-Value Pair)으로 구성된 트리 구조 |
| **표현 방식**            | 태그 기반 (<tag>...</tag>)                   | 컨테이너(container), 리스트(list), 리프(leaf) 등 | 중괄호({}) 및 배열([])로 표현                  |
| **가독성**               | 사람이 읽기 쉽지만 태그가 많아 다소 복잡할 수 있음 | 사람이 직접 읽기보다는 NETCONF 도구에서 사용됨     | 간결하고 읽기 쉬움                              |
| **파일 크기**            | 태그가 많아 상대적으로 크기가 큼                 | 파일 자체는 없고 모델 정의만 제공                 | 태그가 없어 XML보다 상대적으로 작음              |
| **주요 용도**            | 문서 표현, 데이터 교환 (HTML과 유사)            | 네트워크 관리용 데이터 모델링                   | 웹 API, 애플리케이션 데이터 교환                 |
| **사용 예**              | NETCONF 데이터 전송                           | NETCONF 데이터 모델 정의                       | REST API, 데이터 통신                          |
| **확장성**               | 매우 유연함                                    | 유연함, 사용자 정의 모델링 가능                 | 유연함, 단순 데이터 표현                       |

---

### 각각의 한국어 발음

1. **XML**  
   - **발음**: 엑스엠엘  
   - **의미**: eXtensible Markup Language의 약자.  
     - "확장 가능한 마크업 언어"로 해석.

2. **YANG**  
   - **발음**: 양  
   - **의미**: Yet Another Next Generation의 약자.  
     - "또 다른 차세대"라는 의미로, 네트워크 데이터 모델링 언어를 지칭.

3. **JSON**  
   - **발음**: 제이슨  
   - **의미**: JavaScript Object Notation의 약자.  
     - "자바스크립트 객체 표기법"으로, 데이터 교환에 널리 사용.

---

### 차이를 비유로 이해하기

- **XML**:  
  책처럼 데이터가 잘 정리되어 있지만, 한 페이지마다 두꺼운 표지가 붙어 있어 크기가 큼.  
  예: `<title>네트워크 설정</title>`  
  - 태그가 많아 복잡해 보일 수 있음.

- **YANG**:  
  설계도 자체로, 데이터를 어떻게 구조화할지 정의한 청사진.  
  예: `컨테이너 안에 '이름'이라는 리프와 '활성화 상태'라는 리프가 들어간다` 같은 정의를 담음.  
  - 데이터를 직접 표현하기보다는 설계를 위해 사용.

- **JSON**:  
  메모지에 깔끔하게 정리된 노트처럼 간단명료함.  
  예: `{ "title": "네트워크 설정" }`  
  - 태그가 없고 간결해 데이터를 전송하거나 저장할 때 효율적.

---

### 각 형식의 주요 사용 사례
1. **XML**:  
   - NETCONF에서 데이터를 전송하는 데 주로 사용됨.
   - 예: `<rpc>...</rpc>` 형식의 요청.
   
2. **YANG**:  
   - NETCONF와 함께 데이터의 구조와 규칙을 설계하는 데 사용됨.
   - 예: 인터페이스 목록, 장치 설정 구조를 정의.

3. **JSON**:  
   - REST API와 같은 웹 서비스에서 데이터를 주고받는 데 주로 사용됨.
   - 예: `{"interface": "eth0", "status": "up"}`.

---

### 결론
- **XML**은 데이터를 표현하고 전송하기 위한 표준 형식.
- **YANG**은 XML/JSON 등의 데이터를 **정의**하는 데이터 모델링 언어.
- **JSON**은 간결하고 효율적인 데이터 표현 형식으로, 웹 서비스와 애플리케이션에서 널리 사용됨.

이해하기 쉽게 말하자면:
- **XML**은 데이터를 담은 "상자".
- **YANG**은 상자의 설계도.
- **JSON**은 가벼운 상자.

즉 -XML ,JSON 은 데이터언어고 YANG은 데이터언어의 설계도

---

### NETCONF와 YANG의 역할 구분

1. **NETCONF**:  
   - **네트워크 관리 프로토콜**로, 네트워크 장치의 설정을 관리하고 자동화 작업을 수행.
   - 데이터를 가져오거나 설정을 변경하는 작업을 원격으로 수행하며, 데이터 전송에는 **XML**이나 **JSON** 같은 형식을 사용.
   - 쉽게 말해, **NETCONF는 데이터를 주고받는 프로토콜**.

2. **YANG**:  
   - **데이터 모델링 언어**로, **NETCONF에서 주고받는 데이터의 구조**를 정의
   - 어떤 데이터가 필요하고, 그 데이터가 어떤 형식이어야 하는지를 명확히 설계
   - 쉽게 말해, **YANG은 NETCONF에서 다룰 데이터의 설계도**

---

### 왜 NETCONF와 YANG이 함께 언급되는가?
NETCONF는 설정 데이터를 주고받는 프로토콜이고, 이 데이터가 어떻게 생겼는지(구조와 형식)는 YANG으로 정의.  
즉, **NETCONF가 YANG으로 설계된 데이터 모델을 기반으로 동작**하기 때문에 두 기술이 함께 언급.

---

### 비유로 이해하기
- **NETCONF**: 물건을 배송하는 택배 서비스.  
  - 데이터를 주고받는 역할.
- **YANG**: 배송할 물건의 포장 규칙(상자 크기, 내용물 형태, 라벨).  
  - 데이터의 구조와 내용을 설계.

---

### 결론
**NETCONF**는 네트워크 관리 프로토콜로, 대규모 네트워크 환경에서 설정 관리와 자동화 작업을 수행.  
**YANG**은 NETCONF가 처리할 데이터를 **정의**하는 역할을 할 뿐, 직접적으로 네트워크를 관리하거나 자동화하지는 않음.  
따라서 YANG은 NETCONF를 **보조**하는 도구
