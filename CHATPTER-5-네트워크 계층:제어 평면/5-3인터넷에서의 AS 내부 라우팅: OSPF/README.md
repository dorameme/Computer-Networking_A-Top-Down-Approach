### 네트워크 라우팅에서 자율 시스템(AS)의 역할

네트워크에서 동일한 라우팅 알고리즘을 수행하는 동종의 라우터 집합을 자율 시스템(AS, Autonomous System)으로 간주하는 관점은 다음의 두 가지 문제점을 가지고 있다.

1. 확장성 문제
   - 라우터의 수가 증가함에 따라 라우팅 정보의 통신, 계산, 저장에 필요한 오버헤드가 급증한다.

2. 관리 자율성 문제
   - ISP는 일반적으로 자신의 네트워크를 원하는 방식으로 운용하고자 하며, 네트워크 내부의 구성을 외부에 감추고 싶어한다. 즉, 어떤 라우팅 알고리즘이라도 사용할 수 있도록 해야 한다.

이러한 문제들은 자율 시스템(AS)으로 조직화함으로써 해결할 수 있다.

### 자율 시스템(AS)

- 자율 시스템(AS)은 동일한 관리 제어하에 있는 라우터 그룹으로 구성된다.
- 각 AS는 고유한 AS 번호(ASN, Autonomous System Number)로 식별된다.
- 같은 AS 내의 라우터들은 동일한 라우팅 알고리즘을 사용하고, 상대방에 대한 정보를 공유한다.
- AS 내부 라우팅 프로토콜(Intra-AS routing protocol)은 자율 시스템 내부에서 동작하는 라우팅 알고리즘을 의미한다.


---

### 개방형 최단 경로 우선(OSPF) 프로토콜

OSPF(Open Shortest Path First)는 링크 상태 알고리즘을 기반으로 한 라우팅 프로토콜로, 인터넷에서 자율 시스템(AS) 내부의 라우팅에 널리 사용된다. OSPF는 링크 상태 정보를 플러딩(flooding)하고, 다익스트라 알고리즘을 사용하여 최단 경로를 계산한다.

### OSPF의 동작 원리

1. 토폴로지 지도 생성
   - 각 라우터는 AS 전체에 대한 완벽한 토폴로지 지도를 얻는다.
   - 각 라우터는 자신을 루트 노드로 두고 다익스트라 알고리즘을 사용하여 모든 서브넷에 이르는 최단 경로 트리를 계산한다.

2. 라우팅 정보의 브로드캐스트
   - OSPF를 사용하는 라우터는 자율 시스템 내 다른 모든 라우터에게 라우팅 정보를 브로드캐스팅한다.

3. 링크 상태 변경
   - 링크 상태가 변경될 때마다, 혹은 일정한 주기(최소 30분마다)로 링크 상태 정보가 OSPF 메시지에 포함되어 인터넷 프로토콜을 통해 전송된다.
   - OSPF는 자체적으로 신뢰할 수 있는 메시지 전송과 링크 상태의 브로드캐스트 기능을 구현한다.

4. 링크 상태 검사
   - OSPF는 링크가 정상적으로 동작하는지 확인하고, 이웃 라우터들이 네트워크 전반의 링크 상태를 공유할 수 있도록 한다.

### OSPF 링크 가중치 설정

- 링크 가중치 설정: 라우팅 경로는 링크의 가중치에 의해 결정된다. 관리자는 링크 가중치를 설정하여 트래픽 흐름을 제어할 수 있다.
  - 예를 들어, 최소 홉 라우팅을 위해 모든 링크의 비용을 1로 설정하거나, 적은 대역폭을 가진 링크의 사용을 억제하기 위해 링크 용량에 반비례하는 가중치를 설정할 수 있다.

### OSPF의 주요 개선사항

1. 보안 기능
   - OSPF는 라우터 간에 링크 상태 갱신을 인증할 수 있다. 인증을 통해 신뢰할 수 있는 라우터만 AS 내부 OSPF 프로토콜에 참여할 수 있다.
   - 인증 방식에는 두 가지 종류가 있다:
     - 단순 인증: 패스워드를 평문으로 사용하며 보안이 취약하다.
     - MD5 인증: 비밀키를 사용하여 보안을 강화한다.

2. 복수 동일 비용 경로
   - OSPF는 동일한 비용을 가진 여러 경로를 허용한다. 비용이 동일한 경로가 여러 개 있을 경우, 트래픽을 여러 경로로 분산시킬 수 있다.

3. 유니캐스트와 멀티캐스트 라우팅 통합 지원
   - MOSPF(Multicast OSPF)는 멀티캐스트 라우팅을 지원하기 위해 OSPF를 확장한 버전이다.
   - 기존의 OSPF 링크 상태 데이터베이스에 새로운 형태의 멀티캐스트 링크 상태 알림을 추가하여 멀티캐스트 라우팅을 지원한다.

### OSPF에서의 계층적 지원

- 영역(Area): AS 내에서 OSPF는 계층적인 영역으로 나누어 운영된다. 각 영역은 독립적으로 OSPF 링크 상태 라우팅을 수행한다.
- 영역 경계 라우터(ABR): 각 영역의 경계에서 라우팅을 담당하는 라우터로, 다른 영역과의 트래픽을 라우팅한다.
- 백본 영역: 모든 영역 간 트래픽을 라우팅하는 중심 역할을 하며, 다른 영역과 연결되는 영역 경계 라우터를 통해 라우팅된다.

----
백본(Backbone)은 네트워크에서 중앙적인 역할을 하는 주요 경로를 의미한다. 

### 예시로 쉽게 설명:
- 백본은 마치 고속도로처럼, 여러 지역을 연결하는 중앙 도로 역할을 한다.
- 영역 경계 라우터(ABR)는 각 지역의 경계에 위치하며, 서로 다른 지역(영역) 간 데이터를 백본을 통해 전달한다.
- 백본은 여러 영역을 연결하는 중심 네트워크로, 영역 간 통신을 담당한다.

### 라우팅 과정:
1. 영역 내 라우팅: 각 영역 내에서는 자체적으로 라우팅이 이루어지며, 영역 경계 라우터가 다른 영역과의 연결을 담당한다.
2. 백본 통과: 데이터는 백본을 통과하여 다른 영역의 영역 경계 라우터로 전달된다.
3. 목적지 라우팅: 이후, 목적지 영역 경계 라우터를 통해 최종 목적지로 전달된다.

### 요약
- 백본은 여러 영역을 연결하는 중앙 네트워크이다. 영역 간의 데이터는 백본을 통해 전달된다.
----
### 자율 시스템(AS)과 OSPF 특징

1. 자율 시스템(AS): 
   - 자율 시스템은 하나의 회사와 같다. 
   - 회사 내 모든 네트워크 장비는 하나의 규칙으로 운영된다. 
   - 외부와 연결될 때는 자율 시스템만의 규칙을 따른다.

2. OSPF: 
   - OSPF는 부서 간 의사소통 규칙이다. 
   - 각 라우터는 연결 상태 정보를 교환하며 가장 효율적인 경로를 선택한다. 
   - 다익스트라 알고리즘을 사용해 최단 경로를 계산한다.

### 요약
- 자율 시스템(AS): 회사처럼 내부 네트워크를 관리한다.
- OSPF: 부서 간 정보를 주고받아 가장 빠른 경로를 찾는다.

----

### 유니캐스트, 멀티캐스트, 애니캐스트 비교
| 종류         | 통신 방식                 | 데이터 전달 대상                    | 예시                              |
|--------------|--------------------------|------------------------------------|----------------------------------|
| 유니캐스트  | 일대일                   | 송신자 -> 단일 수신자               | 웹 서버와의 HTTP 통신           |
| 멀티캐스트  | 일대다                   | 송신자 -> 특정 그룹의 수신자들       | 실시간 비디오 스트리밍           |
| 애니캐스트  | 일대일 또는 일대다         | 송신자 -> 가장 가까운 수신자        | DNS 서버, CDN                   |

